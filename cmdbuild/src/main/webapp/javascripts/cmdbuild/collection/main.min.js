function buildDetaiWindow(e){var t=Ext.create("CMDBuild.core.window.AbstractModal",{title:CMDBuild.Translation.details,dockedItems:[Ext.create("Ext.toolbar.Toolbar",{dock:"bottom",itemId:CMDBuild.core.constants.Proxy.TOOLBAR_BOTTOM,ui:"footer",layout:{type:"hbox",align:"middle",pack:"center"},items:[Ext.create("CMDBuild.core.buttons.text.Close",{scope:this,handler:function(e,n){t.destroy()}})]})],items:[Ext.create("Ext.panel.Panel",{border:!1,autoScroll:!0,html:'<pre style="padding:5px; font-size: 1.2em">'+CMDBuild.core.Message.detailBuffer[e]+"</pre>"})]}).show()}Ext.define("CMDBuild.core.constants.Proxy",{singleton:!0,ABSOLUTE_CLASS_ORDER:"absoluteClassOrder",ACCORDION:"accordion",ACCOUNT:"account",ACTION:"action",ACTIVE:"active",ACTIVE_ONLY:"activeOnly",ACTIVITY:"activity",ACTIVITY_DESCRIPTION:"activityDescription",ACTIVITY_ID:"activityId",ACTIVITY_INSTANCE_ID:"activityInstanceId",ACTIVITY_INSTANCE_INFO_LIST:"activityInstanceInfoList",ACTIVITY_METADATA:"activityMetadata",ACTIVITY_NAME:"activityName",ACTIVITY_PERFORMER_NAME:"activityPerformerName",ACTIVITY_SUBSET_ID:"activitySubsetId",ACTIVITY_WRITABLE:"activityWritable",ADD_DISABLED:"addDisabled",ADDRESS:"address",ADMIN:"admin",ADMINISTRATOR_PASSWORD:"administratorPassword",ADMINISTRATOR_USER_NAME:"administratorUserName",ADVANCE:"advance",ADVANCED:"advanced",ALFRESCO:"alfresco",ALFRESCO_DELAY:"alfrescoDelay",ALFRESCO_FILE_SERVER_PORT:"alfrescoFileServerPort",ALFRESCO_FILE_SERVER_URL:"alfrescoFileServerUrl",ALFRESCO_HOST:"alfrescoHost",ALFRESCO_LOOKUP_CATEGORY:"alfrescoLookupCategory",ALFRESCO_PASSWORD:"alfrescoPassword",ALFRESCO_REPOSITORY_APPLICATION:"alfrescoRepositoryApplication",ALFRESCO_REPOSITORY_FILE_SERVER_PATH:"alfrescoRepositoryFileServerPath",ALFRESCO_REPOSITORY_WEB_SERVICE_PATH:"alfrescoRepositoryWebServicePath",ALFRESCO_USER:"alfrescoUser",ALL:"all",ALLOW_CARD_EDITING:"allowCardEditing",ALLOW_PASSWORD_CHANGE:"allowPasswordChange",ALREADY_ASSOCIATED:"alreadyAssociated",ALWAYS_ENABLED:"alwaysEnabled",AND:"and",ANY:"any",APPLIED:"applied",ATTACHMENT:"attachment",ATTACHMENTS:"attachments",ATTACHMENTS_ACTIVE:"attachmentsActive",ATTACHMENTS_CATEGORY:"attachmentsCategory",ATTRIBUTE:"attribute",ATTRIBUTE_CLASS:"attributeClass",ATTRIBUTE_DESCRIPTION:"attributeDescription",ATTRIBUTE_DOMAIN:"attributeDomain",ATTRIBUTE_MAPPING:"attributeMapping",ATTRIBUTE_NAME:"attributeName",ATTRIBUTE_PATH:"attributePath",ATTRIBUTE_SEPARATOR:"attributeSeparator",ATTRIBUTES:"attributes",ATTRIBUTES_NODE:"attributesNode",ATTRIBUTES_PRIVILEGES:"attributesPrivileges",AUTHOR:"author",AUTHORIZATION_HEADER_KEY:"CMDBuild-Authorization",AUTOCOMPLETION:"autocompletion",BASE:"base",BASE_DSP:"basedsp",BASE_LEVEL:"baseLevel",BASE_NODE:"baseNode",BCC:"bcc",BCC_ADDRESSES:"bccAddresses",BEGIN_DATE:"beginDate",BEGIN_DATE_AS_LONG:"beginDateAsLong",BIM:"bim",BIM_LAYER:"bimLayer",BODY:"body",BULK_UPDATE:"bulkUpdate",CALCULATED:"calculated",CALLBACK:"callback",CAPABILITIES:"capabilities",CARD:"card",CARD_BINDING:"cardBinding",CARD_BROWSER_BY_DOMAIN_CONFIGURATION:"cardBrowserByDomainConfiguration",CARD_FORM_RATIO:"cardFormRatio",CARD_ID:"cardId",CARD_IDENTIFIER:"cardIdentifier",CARD_LOCK_TIMEOUT:"cardLockTimeout",CARD_SEPARATOR:"cardSeparator",CARD_TABS_POSITION:"cardTabsPosition",CARDINALITY:"cardinality",CARDS:"cards",CATEGORIES:"categories",CATEGORY:"category",CC:"cc",CC_ADDRESSES:"ccAddresses",CENTER_LATITUDE:"centerLatitude",CENTER_LONGITUDE:"centerLongitude",CHANGE_PASSWORD:"changePassword",PASSWORD_EXPIRED:"passwordExpired",CHANGE_STATUS:"changeStatus",CHANGED:"changed",CHECKED:"checked",CHECKED_CARDS:"checkedCards",CHILD_NODES:"childNodes",CHILD_NODES_ID:"childNodesId",CHILDREN:"children",CLASS:"class",CLASS_ATTACHMENT_TAB:"classAttachmentTab",CLASS_ATTRIBUTE:"classAttribute",CLASS_DESCRIPTION:"classDescription",CLASS_DETAIL_TAB:"classDetailTab",CLASS_EMAIL_TAB:"classEmailTab",CLASS_HISTORY_TAB:"classHistoryTab",CLASS_ID:"classId",CLASS_IDENTIFIER:"classIdentifier",CLASS_MAPPING:"classMapping",CLASS_NAME:"className",CLASS_NAMES:"classNames",CLASS_NOTE_TAB:"classNoteTab",CLASS_ORDER_SIGN:"classOrderSign",CLASS_RELATION_TAB:"classRelationTab",CLASS_TARGET_ID:"classTargetId",CLASSES:"classes",CLIENT_FILTER:"clientFilter",CLONE:"clone",CLONE_DISABLED:"cloneDisabled",CLOUD_ADMIN:"cloudAdmin",CLUSTERING_THRESHOLD:"clusteringThreshold",CMIS:"cmis",CMIS_HOST:"cmisHost",CMIS_MODEL:"cmisModel",CMIS_PASSWORD:"cmisPassword",CMIS_PATH:"cmisPath",CMIS_USER:"cmisUser",CODE:"code",COLUMNS:"columns",COMPONENTS:"components",CONDITION:"condition",CONFIGURATION:"configuration",CONFIRMATION:"confirmation",CONFIRMED:"confirmed",CONNECTION_HOST:"connectionHost",CONNECTION_PASSWORD:"connectionPassword",CONNECTION_PORT:"connectionPort",CONNECTION_USER:"connectionUser",CONTENT:"content",CONTEXT:"context",COUNT:"count",CQL:"cql",CQL_FILTER:"cqlFilter",CREATE:"create",CREATE_SHARK_SCHEMA:"createSharkSchema",CREATION:"creation",CRON_EXPRESSION:"cronExpression",CRON_INPUT_TYPE:"cronInputType",CSV:"csv",CSV_IMPORT_ONEBYONE:"csvImportOnebyone",CUSTOM:"custom",CUSTOM_FORM:"customForm",CUSTOM_PAGE:"customPage",CUSTOM_PAGES:"customPages",DASHBOARD:"dashboard",DASHBOARDS:"dashboards",DATA:"data",DATA_INDEX:"dataIndex",DATA_SOURCES:"dataSources",DATA_VIEW:"dataView",DATABASE_NAME:"databaseName",DATABASE_TYPE:"databaseType",DATABASE_USER_NAME:"databaseUserName",DATABASE_USER_PASSWORD:"databaseUserPassword",DATABASE_USER_TYPE:"databaseUserType",DATASOURCE:"dataSourceName",DATASOURCE_ADDRESS:"dataSourceAddress",DATASOURCE_CONFIGURATION:"dataSourceConfiguration",DATASOURCE_DB_INSATANCE_NAME:"dataSourceDbInstance",DATASOURCE_DB_NAME:"dataSourceDbName",DATASOURCE_DB_PASSWORD:"dataSourceDbPassword",DATASOURCE_DB_PORT:"dataSourceDbPort",DATASOURCE_DB_TYPE:"dataSourceDbType",DATASOURCE_DB_USERNAME:"dataSourceDbUsername",DATASOURCE_TABLE_VIEW_PREFIX:"dataSourceTableViewPrefix",DATASOURCE_TYPE:"dataSourceType",DATE:"date",DAY_OF_MONTH:"dayOfMonth",DAY_OF_WEEK:"dayOfWeek",DB:"db",DEFAULT:"default",DEFAULT_ACCOUNT:"defaultAccount",DEFAULT_DATE:"defaultDate",DEFAULT_FILTER:"defaultFilter",DEFAULT_FOR_GROUPS:"defaultForGroups",DEFAULT_GROUP_DESCRIPTION:"defaultGroupDescription",DEFAULT_GROUP_ID:"defaultGroupId",DEFAULT_GROUP_NAME:"defaultGroupName",DEFAULT_LANGUAGE:"defaultLanguage",DEFAULT_LOCALIZATION:"defaultLocalization",DEFAULT_SELECTION:"defaultSelection",DELAY:"delay",DELETE:"delete",DELETE_CARD:"deleteCard",DELETE_DISABLED:"deleteDisabled",DELETE_TYPE:"deletionType",DEMO:"demo",DESCRIPTION:"description",DESTINATION:"destination",DESTINATION_CLASS:"destinationClass",DESTINATION_CLASS_ID:"destinationClassId",DESTINATION_CLASS_NAME:"destinationClassName",DESTINATION_CODE:"destinationCode",DESTINATION_DESCRIPTION:"destinationDescription",DESTINATION_DISABLED_CLASSES:"destinationDisabledClasses",DIRECT:"direct",DIRECT_DESCRIPTION:"directDescription",DIRECTION:"direction",DIRTY:"dirty",DISABLE:"disable",DISABLE_ADD_ROW:"disableAddRow",DISABLE_DELETE_ROW:"disableDeleteRow",DISABLE_GRID_FILTER_TOGGLER:"disableGridFilterToggler",DISABLE_IMPORT_FROM_CSV:"disableImportFromCsv",DISABLE_SYNCHRONIZATION_OF_MISSING_VARIABLES:"disableSynchronizationOfMissingVariables",DISABLED:"disabled",DISABLED_CARD_TABS:"disabledCardTabs",DISABLED_FEATURES:"disabledFeatures",DISABLED_MODULES:"disabledModules",DISABLED_PROCESS_TABS:"disabledProcessTabs",DISPLAY_CARD_LOCKER_NAME:"displayCardLockerName",DISPLAY_LABEL:"displayLabel",DMS:"dms",DOMAIN:"domain",DOMAIN_DESCRIPTION:"domainDescription",DOMAIN_DIRECTION:"domainDirection",DOMAIN_ID:"domainId",DOMAIN_NAME:"domainName",DOMAINS:"domains",DRAFT:"draft",EDGE_COLOR:"edgeColor",EDITING_MODE:"editingMode",EDITOR_TYPE:"editorType",ELEMENTS:"elements",EMAIL:"email",EMAIL_ACCOUNT:"emailAccount",EMAIL_ACTIVE:"emailActive",EMAIL_ID:"emailId",EMAIL_TEMPLATE:"emailTemplate",EMAIL_TEMPLATES:"emailTemplates",EMPTY:"empty",ENABLE:"enable",ENABLE_ADD_ATTACHMENT_ON_CLOSED_ACTIVITIES:"enableAddAttachmentOnClosedActivities",ENABLE_CARD_LOCK:"enableCardLock",ENABLE_EDGE_TOOLTIP:"enableEdgeTooltip",ENABLE_MAP:"enableMap",ENABLE_MOVE_REJECTED_NOT_MATCHING:"enableMoveRejectedNotMatching",ENABLE_NODE_TOOLTIP:"enableNodeTooltip",ENABLE_RECURSION:"enableRecursion",ENABLED:"enabled",ENABLED_LANGUAGES:"enabledLanguages",ENABLED_PANELS:"enabledPanels",END_DATE:"endDate",ENGINE:"engine",ENTITY:"entity",ENTITY_DESCRIPTION:"entityDescription",ENTITY_ID:"entityId",ENTITY_IDENTIFIER:"entityIdentifier",ENTITY_NAME:"entityName",ENTRY_TYPE:"entryType",ERRORS:"errors",EVENT_CLASS:"eventClass",EVENT_TITLE:"eventTitle",EXCLUDE:"exclude",EXCLUDE_PROCESSES:"excludeProcesses",EXECUTABLE:"executable",EXISTING:"existing",EXPORT_CSV:"exportCsv",EXPORT_DISABLED:"exportDisabled",EXPRESSION:"expression",EXTENSION:"extension",EXTENSION_MAXIMUM_LEVEL:"extensionMaximumLevel",EXTERNAL_GRAPHIC:"externalGraphic",FAILURE:"failure",FAILURES:"failures",FIELD:"field",FIELD_MODE:"fieldmode",FIELDS:"fields",FILE:"file",FILE_NAME:"fileName",FILL_COLOR:"fillColor",FILL_OPACITY:"fillOpacity",FILLED:"filled",FILTER:"filter",FILTER_FROM_ADDRESS:"filterFromAddress",FILTER_FUNCTION:"filterFunction",FILTER_SUBJECT:"filterSubject",FILTER_TYPE:"filterType",FILTERS:"filters",FK_DESTINATION:"fkDestination",FLOW_STATUS:"flowStatus",FOLDER_TYPE:"folderType",FORCE_CREATION:"forceCreation",FORCE_DOWNLOAD:"forceDownload",FORCE_DOWNLOAD_PARAM_KEY:"force-download",FORCE_FORMAT:"forceFormat",FORM:"form",FORMAT:"format",FROM:"from",FROM_ADDRESS:"fromAddress",FULL_NAME:"fullName",FULL_SCREEN:"fullScreen",FULL_SCREEN_MODE:"fullScreenMode",FUNCTION:"function",FUNCTION_DATA:"functionData",FUNCTIONS:"functions",GENERIC:"generic",GEO_SERVER:"geoServer",GEO_SERVER_LAYERS_MAPPING:"geoServerLayersMapping",GIS:"gis",GOOGLE:"google",GRAPH:"graph",GRID:"grid",GRID_CONFIGURATION:"gridConfiguration",GROUP:"group",GROUP_DESCRIPTIONS:"groupDescriptions",GROUP_ID:"groupId",GROUP_NAME:"groupName",GROUP_PRIVILEGE:"groupPrivilege",GROUPS:"groups",HAS_POSITION:"hasPosition",HEADERS:"headers",HIDDEN:"hidden",HIDE_SIDE_PANEL:"hideSidePanel",HISTORY:"history",HOST:"host",HOUR:"hour",ICON:"icon",ID:"id",ID_DOMAIN:"idDomain",IDENTIFIER:"identifier",IMAP_PORT:"imapPort",IMAP_SERVER:"imapServer",IMAP_SSL:"imapSsl",IMAP_START_TLS:"imapStartTls",IMPORT_CSV:"importCsv",IMPORT_DISABLED:"importDisabled",IMPORT_MAPPING:"importMapping",INCOMING_FOLDER:"incomingFolder",INDEX:"index",INHERITED:"inherited",INITIAL_ZOOM_LEVEL:"initialZoomLevel",INPUT:"input",INSTANCE:"instance",INSTANCE_ID:"instanceId",INSTANCE_IDENTIFIER:"instanceIdentifier",INSTANCE_NAME:"instanceName",INSTRUCTIONS:"instructions",INVERSE_DESCRIPTION:"inverseDescription",IP_TYPE:"ipType",IS_ACTIVE:"isActive",IS_ADMINISTRATOR:"isAdministrator",IS_CARD:"isCard",IS_CLOUD_ADMINISTRATOR:"isCloudAdministrator",IS_DEFAULT:"isDefault",IS_ID_TEMPORARY:"isIdTemporary",IS_KEY:"isKey",IS_MASTER_DETAIL:"isMasterDetail",IS_RELATION:"isRelation",IS_STARTABLE:"isStartable",IS_SUPER_CLASS:"isSuperClass",IS_VISIBLE:"isVisible",ITEM:"item",ITEM_ENTITY_NAME:"itemEntityName",ITEM_ID:"itemId",JDBC_DRIVER_VERSION:"jdbcDriverVersion",JRXML:"jrxml",KEEP_SYNCHRONIZATION:"keepSynchronization",KEY:"key",KEY_ATTRIBUTES:"keyAttributes",KEY_VALUE_SEPARATOR:"keyValueSeparator",LABEL:"label",LANGUAGE:"language",LANGUAGE_PROMPT:"languagePrompt",LANGUAGES:"languages",LANGUAGES_TAGS:"languagesTags",LANGUAGES_WITH_LOCALIZATIONS:"languagesWithLocalizations",LANGUAGES_WITH_LOCALIZATIONS_TAGS:"languagesWithLocalizationsTags",LAYER_FULL_NAME:"layerFullName",LAYERS:"layers",LAYOUT:"layout",LDAP:"ldap",LEAF:"leaf",LENGTH:"length",LIMIT:"limit",LOCAL:"local",LOCALIZATION:"localization",LOCALIZED_HEADER_KEY:"CMDBuild-Localized",LOGOUT_REDIRECT:"logoutRedirect",LOOKUP:"lookup",LOOKUP_TYPE:"lookupType",LOOKUP_VALUE:"lookupValue",MAJOR:"major",MANDATORY:"mandatory",MAP:"map",MAP_LATITATUDE:"mapLatitude",MAP_LONGITUDE:"mapLongitude",MAP_ZOOM:"mapZoom",MASTER_DETAIL:"masterDetail",MASTER_DETAIL_LABEL:"masterDetailLabel",MASTER_TABLE_NAME:"masterTableName",MAX_ZOOM:"maxZoom",MENU:"menu",MENU_ITEM:"menuItem",MESSAGE:"message",META:"meta",METADATA:"metadata",METADATA_GROUP_NAME:"metadataGroupName",METADATA_GROUPS:"metadataGroups",METADATA_OUTPUT:"metadataOutput",MIN_ZOOM:"minZoom",MINUTE:"minute",MODE:"mode",MODEL:"model",MODEL_FILE_NAME:"modelFileName",MODEL_NAME:"modelName",MODIFICATION:"modification",MODIFY:"modify",MODIFY_DISABLED:"modifyDisabled",MODULE_ID:"moduleId",MONTH:"month",MYSQL:"mysql",NAME:"name",NAME_CLASS_1:"nameClass1",NAME_CLASS_2:"nameClass2",NAVIGATION_TREE:"navigationTree",NAVIGATION_TREE_NODE_ID:"navigationTreeNodeId",NEW:"new",NEW_PASSWORD:"newPassword",NO_SUBJECT_PREFIX:"noSubjectPrefix",NONE:"none",NORMAL:"normal",NOT_POSITIVES:"notPositives",NOTES:"notes",NOTIFICATION_ACTIVE:"notificationActive",NOTIFICATION_EMAIL_ACCOUNT:"notificationEmailAccount",NOTIFICATION_EMAIL_TEMPLATE:"notificationEmailTemplate",NOTIFICATION_EMAIL_TEMPLATE_ERROR:"notificationEmailTemplateError",NOTIFY_WITH:"notifyWith",NUMBER:"number",OBJECT:"object",ODT:"odt",OLD_PASSWORD:"oldPassword",ONE_BY_ONE:"oneByOne",OPERATIONS:"operations",ORACLE:"oracle",ORIENTED_DESCRIPTION:"orientedDescription",ORIGIN:"origin",ORIGIN_CLASS_ID:"originClassId",ORIGIN_CLASS_NAME:"originClassName",ORIGIN_DISABLED_CLASSES:"originDisabledClasses",OSM:"osm",OUTGOING:"outgoing",OUTPUT:"output",OUTPUT_FOLDER:"outputFolder",OWNER:"owner",PAGE:"page",PARAMETERS:"parameters",PARAMS:"params",PARENT:"parent",PARENT_DESCRIPTION:"parentDescription",PARENT_ID:"parentId",PARSING_ACTIVE:"parsingActive",PARSING_KEY_END:"parsingKeyEnd",PARSING_KEY_INIT:"parsingKeyInit",PARSING_VALUE_END:"parsingValueEnd",PARSING_VALUE_INIT:"parsingValueInit",PASSWORD:"password",PATCH:"patch",PATCHES:"patches",PATH:"path",PDF:"pdf",PERFORMER_NAME:"performerName",PERFORMERS:"performers",PERMISSIONS:"permissions",PHASE:"phase",PHASE_AFTER_CREATE:"afterCreate",PHASE_AFTER_UPDATE:"afterUpdate",PHASE_BEFORE_DELETE:"beforeDelete",PHASE_BEFORE_UPDATE:"beforeUpdate",POINT_RADIUS:"pointRadius",POLLING_FREQUENCY:"pollingFrequency",POPUP_HEIGHT_PERCENTAGE:"popupHeightPercentage",POPUP_WIDTH_PERCENTAGE:"popupWidthPercentage",PORT:"port",POSITION:"position",PRECISION:"precision",PREFIX:"prefix",PRESELECT_IF_UNIQUE:"preselectIfUnique",PRESET:"preset",PRESETS:"presets",PRESETS_TYPE:"presetsType",PRIVILEGED:"privileged",PRIVILEGES:"privileges",PROCESS:"process",PROCESS_ATTACHMENT_TAB:"processAttachmentTab",PROCESS_EMAIL_TAB:"processEmailTab",PROCESS_HISTORY_TAB:"processHistoryTab",PROCESS_IDENTIFIER:"processIdentifier",PROCESS_INSTANCE_ID:"processInstanceId",PROCESS_NOTE_TAB:"processNoteTab",PROCESS_RELATION_TAB:"processRelationTab",PROCESS_WIDGET_ALWAYS_ENABLED:"processWidgetAlwaysEnabled",PROCESSED_FOLDER:"processedFolder",PROMPT_SYNCHRONIZATION:"promptSynchronization",PROPERTY:"property",PROPERTY_IDENTIFIER:"propertyIdentifier",PROPERTY_NAME:"propertyName",QUERY:"query",QUICK_SEARCH:"quickSearch",READ:"read",READ_ONLY:"readOnly",READ_ONLY_ATTRIBUTES:"readOnlyAttributes",READ_ONLY_SEARCH_WINDOW:"readOnlySearchWindow",REASON:"reason",RECEIVED:"received",RECIPIENT_ADDRESS:"recipientAddress",RECORD:"record",REFERENCE:"reference",REFERENCE_ATTRIBUTES:"referenceAttributes",REFERENCE_COMBO_STORE_LIMIT:"referenceComboStoreLimit",REFERENCED_CLASS_NAME:"referencedClassName",REFERENCED_ELEMENT_ID:"referencedElementId",REFRESH_BEHAVIOUR:"refreshBehaviour",REGEX:"regex",REJECT_NOT_MATCHING:"rejectNotMatching",REJECTED_FOLDER:"rejectedFolder",RELATION:"relation",RELATION_ID:"relationId",RELATION_LIMIT:"relationLimit",RELATIONS:"relations",RELATIONS_SIZE:"relations_size",REMOVE:"remove",REPORT:"report",REPORT_ACTIVE:"reportActive",REPORT_CODE:"reportCode",REPORT_EXTENSION:"reportExtension",REPORT_ID:"reportId",REPORT_NAME:"reportName",REPORT_PARAMETERS:"reportParameters",REQUIRED:"required",RESPONSE:"response",RESTRICTED_ADMIN:"restrictedAdmin",RESULT:"result",RESULTS:"results",ROLE:"role",ROOT:"root",ROOT_CLASS:"rootClass",ROW_LIMIT:"rowLimit",ROWS:"rows",RTF:"rtf",RUNTIME:"runtime",SCALE:"scale",SCOPE:"scope",SECTION:"section",SECTION_HIERARCHY:"sectionHierarchy",SECTION_ID:"sectionId",SELECTABLE:"selectable",SELECTED:"selected",SENDER_ACCOUNT:"senderAccount",SENT:"sent",SEPARATOR:"separator",SERVER_URL:"serverUrl",SERVICE:"service",SERVICE_ENDPOINT:"serviceEndpoint",SESSION:"session",SESSION_ID:"sessionId",SESSION_TIMEOUT:"sessionTimeout",SHORT:"short",SHOW_COLUMN:"showColumn",SIMPLE:"simple",SIMPLE_FILTER:"simpleFilter",SIMPLE_HISTORY_MODE_FOR_CARD:"simpleHistoryModeForCard",SIMPLE_HISTORY_MODE_FOR_PROCESS:"simpleHistoryModeForProcess",SINGLE_SELECT:"singleSelect",SKIP_DISABLED_CLASSES:"skipDisabledClasses",SMTP_PORT:"smtpPort",SMTP_SERVER:"smtpServer",SMTP_SSL:"smtpSsl",SMTP_START_TLS:"smtpStartTls",SORT:"sort",SORT_DIRECTION:"sortDirection",SORT_INDEX:"sortIndex",SOURCE:"source",SOURCE_ATTRIBUTE:"sourceAttribute",SOURCE_CLASS_NAME:"sourceClassName",SOURCE_FUNCTION:"sourceFunction",SOURCE_NAME:"sourceName",SOURCE_OBJECT:"sourceObject",SPECIFIC_TYPE_VALUES:"specificTypeValues",SPRITE_DIMENSION:"spriteDimension",SQL:"sql",SQLSERVER:"sqlserver",SRC:"src",STANDARD:"standard",START:"start",START_DATE:"startDate",STARTING_CLASS:"startingClass",STARTING_CLASS_ID:"startingClassId",STATE:"state",STATUS:"status",STEP_RADIUS:"stepRadius",STOPPABLE:"stoppable",STROKE_COLOR:"strokeColor",STROKE_DASHSTYLE:"strokeDashstyle",STROKE_OPACITY:"strokeOpacity",STROKE_WIDTH:"strokeWidth",STRUCTURE:"structure",STYLE:"style",SUB_SECTION:"subSection",SUBJECT:"subject",SYSTEM:"system",TABLE:"table",TABLE_NAME:"tableName",TABLE_TYPE:"tableType",TABS:"tabs",TAG:"tag",TARGET_CLASS:"targetClass",TARGET_CLASS_DESCRIPTION:"targetClassDescription",TARGET_CLASS_FIELD:"targetClassField",TARGET_CLASS_NAME:"targetClassName",TARGET_VARIABLE_NAME:"targetVariableName",TASK:"task",TASK_MANAGER:"taskManager",TEMPLATE:"template",TEMPLATE_ID:"templateId",TEMPLATE_NAME:"templateName",TEMPLATES:"templates",TEMPORARY:"temporary",TEMPORARY_ID:"temporaryId",TEXT:"text",TIME:"time",TIME_INTERVAL:"timeInterval",TITLE:"title",TO:"to",TO_ADDRESSES:"toAddresses",TOKEN:"token",TOOLBAR_BOTTOM:"toolbarBottom",TOOLBAR_TOP:"toolbarTop",TOTAL:"total",TRANSLATION_UUID:"translationUuid",TRANSLATIONS:"translations",TREE_NAME:"treeName",TYPE:"type",TYPES:"types",UI_CONFIGURATION:"uiConfiguration",UNCACHED:"unchached",UNIQUE:"unique",UPDATE:"update",URL:"url",USER:"user",USER_ID:"userId",USER_INTERFACE:"userInterface",USER_STOPPABLE:"userStoppable",USERNAME:"username",USERS:"users",UTILITY:"utility",VALUE:"value",VALUES:"values",VARIABLES:"variables",VERSION:"version",VERSIONABLE:"versionable",VIEW:"view",VIEW_MODE:"viewMode",VIEW_POINT_DISTANCE:"viewPointDistance",VIEW_POINT_HEIGHT:"viewPointHeight",VIEW_TYPE:"viewType",VIEWS:"views",VISIBILITY:"visibility",VISIBLE:"visible",WARNINGS:"warnings",WIDGET:"widget",WIDGET_ID:"widgetId",WIDGETS:"widgets",WORKFLOW:"workflow",WORKFLOW_ACTIVE:"workflowActive",WORKFLOW_ACTIVITY:"workflowActivity",WORKFLOW_ATTRIBUTES:"workflowAttributes",WORKFLOW_CLASS_NAME:"workflowClassName",WORKFLOW_ID:"workflowId",WORKFLOW_INSTANCE:"workflowInstance",WORKFLOW_NAME:"workflowName",WORKSPACE:"workspace",WRITABLE:"writable",WRITE:"write",XPDL:"xpdl",YAHOO:"yahoo",ZIP:"zip",ZOOM_INITIAL_LEVEL:"zoomInitialLevel",ZOOM_MAX:"zoomMax",ZOOM_MIN:"zoomMin"}),function(){Ext.Loader.setConfig({enabled:!0,disableCaching:!1,paths:{CMDBuild:"./javascripts/cmdbuild",CMDBUild:"./javascripts/cmdbuild","Ext.ux":"./javascripts/ext-"+function(e){(e=e||{}).separator=e.separator||".",e.major=e.major||!0,e.minor=e.minor||!0,e.patch=e.patch||!0,e.release=e.release||!1;var t=Ext.getVersion("extjs"),n=[];return e.major&&n.push(t.getMajor()),e.minor&&n.push(t.getMinor()),e.patch&&n.push(t.getPatch()),e.release&&n.push(t.getRelease()),n.join(e.separator)}({release:!1})+"-ux",Logger:"./javascripts/log"}})}(),function(){Ext.define("CMDBuild.core.Utils",{uses:["CMDBuild.core.constants.Global"],singleton:!0,decodeAsBoolean:function(e){if(!Ext.isEmpty(e))switch(Ext.typeOf(e)){case"boolean":return e;case"number":return 0!=e;case"string":return"true"==e.toLowerCase()||"on"==e.toLowerCase()}return!1},deepCloneStore:function(e){var t=Ext.create("Ext.data.Store",{model:e.model});return e.each(function(n){var r=Ext.clone(n.copy().data),o=new e.model(r,r.id);t.add(o)},this),t},getEntryTypeAncestorsId:function(e){var t=[];if(!Ext.Object.isEmpty(e))for(t.push(parseInt(e.get(CMDBuild.core.constants.Proxy.ID)));!Ext.isEmpty(e)&&!Ext.isEmpty(e.get(CMDBuild.core.constants.Proxy.PARENT));)e=_CMCache.getEntryTypeById(e.get(CMDBuild.core.constants.Proxy.PARENT)),Ext.isEmpty(e)||t.push(parseInt(e.get(CMDBuild.core.constants.Proxy.ID)));return t},getEntryTypePrivilegesByName:function(e){return _CMUtils.getEntryTypePrivileges(_CMCache.getEntryTypeByName(e||""))},getExtJsVersion:function(e){(e=e||{}).separator=e.separator||".",e.major=e.major||!0,e.minor=e.minor||!0,e.patch=e.patch||!0,e.release=e.release||!1;var t=Ext.getVersion("extjs"),n=[];return e.major&&n.push(t.getMajor()),e.minor&&n.push(t.getMinor()),e.patch&&n.push(t.getPatch()),e.release&&n.push(t.getRelease()),n.join(e.separator)},getPageNumber:function(e){return 0==e?1:Ext.isEmpty(e)?2:Math.floor(parseInt(e)/CMDBuild.configuration.instance.get(CMDBuild.core.constants.Proxy.ROW_LIMIT)+1)},groupAttributesObjects:function(e,t){(t=Ext.isArray(t)?t:[]).push("Notes");var n={},r=[];return Ext.Array.forEach(e,function(e,o,i){Ext.isEmpty(e)||Ext.Array.contains(t,e[CMDBuild.core.constants.Proxy.NAME])||(Ext.isEmpty(e[CMDBuild.core.constants.Proxy.GROUP])?r.push(e):(Ext.isEmpty(n[e[CMDBuild.core.constants.Proxy.GROUP]])&&(n[e[CMDBuild.core.constants.Proxy.GROUP]]=[]),n[e[CMDBuild.core.constants.Proxy.GROUP]].push(e)))},this),Ext.isEmpty(r)||(n[CMDBuild.Translation.management.modcard.other_fields]=r),n},hasHtmlTags:function(e){return"string"==typeof e&&/<[a-z][\s\S]*>/i.test(e)},isJsonString:function(string){return!(!Ext.isString(string)||Ext.isEmpty(string))&&(!/[^,:{}\[\]0-9.\-+Eaeflnr-u \n\r\t]/.test(string.replace(/"(\\.|[^"\\])*"/g,""))&&eval("("+string+")"))},isObjectEmpty:function(e){if(Ext.isObject(e)){var t=!0;return Ext.Object.each(e,function(e,n,r){if(Ext.isObject(n)){if(!Ext.Object.isEmpty(n))return t=!1,!1}else if(!Ext.isEmpty(n))return t=!1,!1},this),t}return!1},objectArraySort:function(e,t,n,r){return t=Ext.isString(t)?t:CMDBuild.core.constants.Proxy.DESCRIPTION,n=Ext.isString(n)?n:"ASC",r=!!Ext.isBoolean(r)&&r,Ext.isArray(e)&&!Ext.isEmpty(e)?Ext.Array.sort(e,function(e,o){var i=void 0,a=void 0;switch(Ext.isFunction(e.get)&&Ext.isFunction(o.get)?(i=!r&&Ext.isFunction(e.get(t).toLowerCase)?e.get(t).toLowerCase():e.get(t),a=!r&&Ext.isFunction(o.get(t).toLowerCase)?o.get(t).toLowerCase():o.get(t)):Ext.isEmpty(e[t])||Ext.isEmpty(o[t])||(i=!r&&Ext.isFunction(e[t].toLowerCase)?e[t].toLowerCase():e[t],a=!r&&Ext.isFunction(o[t].toLowerCase)?o[t].toLowerCase():o[t]),n){case"DESC":return i>a?-1:i<a?1:0;case"ASC":default:return i<a?-1:i>a?1:0}}):e},prependMandatoryLabel:function(e){return!Ext.isEmpty(e)&&Ext.isString(e)?CMDBuild.core.constants.Global.getMandatoryLabelFlag()+e:e},toTitleCase:function(e){return Ext.isString(e)&&!Ext.isEmpty(e)&&(e=e.charAt(0).toUpperCase()+e.slice(1)),e}}),CMDBuild.Utils=function(){var e=0;return{mergeCardsData:function(e,t){var n={};for(var r in e)n[r]=e[r];for(var r in t)if(n[r]){if("object"!=typeof n[r])continue;n[r]=CMDBuild.Utils.mergeCardsData(e[r],t[r])}else n[r]=t[r];return n},getFirstSelection:function(e){return Ext.isArray(e)?e[0]:e},nextId:function(){return++e},Metadata:{extractMetaByNS:function(e,t){var n={};for(var r in e)if(0==r.indexOf(t)){n[r.substr(t.length)]=e[r]}return n}},Format:{htmlEntityEncode:function(e){return e?String(e).replace(/&/g,"&amp;"):e}},getClassPrivileges:function(e){var t=_CMCache.getEntryTypeById(e);return _CMUtils.getEntryTypePrivileges(t)},getEntryTypePrivileges:function(e){var t={write:!1,create:!1,crudDisabled:{}};if(e){var n=e.get("ui_card_edit_mode"),r=Ext.JSON.decode(n);t={write:e.get("priv_write"),create:e.isProcess()?e.isStartable():e.get("priv_create"),crudDisabled:r}}return t},getEntryTypePrivilegesByCard:function(e){var t={write:!1,create:!1,crudDisabled:{}};if(e){var n=e.get("IdClass"),r=_CMCache.getEntryTypeById(n);t=_CMUtils.getEntryTypePrivileges(r)}return t},isSimpleTable:function(e){var t=_CMCache.getEntryTypeById(e);return!!t&&"simpletable"==t.data.tableType},isProcess:function(e){return!!_CMCache.getProcessById(e)},groupAttributes:function(e,t){for(var n={},r=[],o=0;o<e.length;o++){var i=e[o];if(i&&(t||"Notes"!=i.name)){var a=i.group;a?(n[a]||(n[a]=[]),n[a].push(i)):r.push(i)}}return r.length>0&&(n[CMDBuild.Translation.management.modcard.other_fields]=r),n},foreach:function(e,t,n){if(e)for(var r=0,o=e.length;r<o;++r){var i=e[r];t.call(i,n)}},arraySearchByFunction:function(e,t){if(!Ext.isArray(e)||!Ext.isFunction(t))return null;for(var n=0,r=e.length;n<r;++n){var o=e[n];if(t(o))return o}return null},isSuperclass:function(e){var t=_CMCache.getEntryTypeById(e);return!!t&&t.get("superclass")},getAncestorsId:function(e){var t=null,n=[];if(t="CMDBuild.cache.CMEntryTypeModel"==Ext.getClassName(e)?e:_CMCache.getEntryTypeById(e))for(n.push(t.get("id"));!Ext.isEmpty(t)&&""!=t.get("parent");)t=_CMCache.getEntryTypeById(t.get("parent")),Ext.isEmpty(t)||n.push(t.get("id"));return n},getDescendantsById:function(e){for(var t=this.getChildrenById(e),n=[_CMCache.getEntryTypeById(e)],r=0;r<t.length;++r){var o=t[r],i=this.getDescendantsById(o.get("id"));n=n.concat(i)}return n},forwardMethods:function(e,t,n){Ext.isArray(n)||(n=[n]);for(var r=0,o=n.length;r<o;++r){var i=n[r];if("string"==typeof i&&"function"==typeof t[i]){var a=function(){return t[arguments.callee.$name].apply(t,arguments)};a.$name=i,e[i]=a}}},getChildrenById:function(e){var t=_CMCache.getEntryTypes(),n=[];for(var r in t)(r=t[r]).get("parent")==e&&n.push(r);return n},PollingFunction:function(e){this.success=e.success||Ext.emptyFn,this.failure=e.failure||Ext.emptyFn,this.checkFn=e.checkFn||function(){return!0},this.cbScope=e.cbScope||this,this.delay=e.delay||500,this.maxTimes=e.maxTimes||60,this.checkFnScope=e.checkFnScope||this.cbScope,this.run=function(){60==this.maxTimes&&CMDBuild.core.LoadMask.show(),this.maxTimes>0?this.checkFn.call(this.checkFnScope)?(_debug("End polling with success"),CMDBuild.core.LoadMask.hide(),this.success.call(this.cbScope)):(this.maxTimes--,Ext.Function.defer(this.run,this.delay,this)):(_debug("End polling with failure"),CMDBuild.core.LoadMask.hide(),this.failure.call())}}}}(),_CMUtils=CMDBuild.Utils,CMDBuild.extend=function(e,t){var n=function(){};n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.superclass=t.prototype,t.prototype.constructor==Object.prototype.constructor&&(t.prototype.constructor=t)},CMDBuild.isMixedWith=function(e,t){var n=e.mixins||{};for(var r in n){var o=n[r];if(Ext.getClassName(o)==t)return!0}return!1},CMDBuild.instanceOf=function(e,t){for(;e;){if(Ext.getClassName(e)==t)return!0;e=e.superclass}return!1},CMDBuild.checkInterface=function(e,t){return CMDBuild.isMixedWith(e,t)||CMDBuild.instanceOf(e,t)},CMDBuild.validateInterface=function(e,t){if(CMDBuild.IS_NOT_CONFORM_TO_INTERFACE="The object {0} must implement the interface: {1}",!CMDBuild.checkInterface(e,t))throw Ext.String.format(CMDBuild.IS_NOT_CONFORM_TO_INTERFACE,e.toString(),t)},CMDBuild.clearComponent=function(e){e.items&&e.items.each(function(t){CMDBuild.clearComponent(t);t.getStore&&t.getStore().clearData(),t.destroy&&t.destroy(),e.remove(t)},this),e.removeAll&&e.removeAll()}}(),function(e,t){"function"==typeof define&&define.amd?define(e):"undefined"!=typeof module&&"object"==typeof exports?module.exports=e():t.log4javascript=e()}(function(){function isUndefined(e){return void 0===e}function EventSupport(){}function Log4JavaScript(){}function toStr(e){return e&&e.toString?e.toString():String(e)}function getExceptionMessage(e){return e.message?e.message:e.description?e.description:toStr(e)}function getUrlFileName(e){var t=Math.max(e.lastIndexOf("/"),e.lastIndexOf("\\"));return e.substr(t+1)}function getExceptionStringRep(e){if(e){var t="Exception: "+getExceptionMessage(e);try{e.lineNumber&&(t+=" on line number "+e.lineNumber),e.fileName&&(t+=" in file "+getUrlFileName(e.fileName))}catch(e){logLog.warn("Unable to obtain file and line information for error")}return showStackTraces&&e.stack&&(t+=newLine+"Stack trace:"+newLine+e.stack),t}return null}function bool(e){return Boolean(e)}function trim(e){return e.replace(/^\s+/,"").replace(/\s+$/,"")}function splitIntoLines(e){return e.replace(/\r\n/g,"\n").replace(/\r/g,"\n").split("\n")}function array_remove(e,t){for(var n=-1,r=0,o=e.length;r<o;r++)if(e[r]===t){n=r;break}return n>=0&&(e.splice(n,1),!0)}function array_contains(e,t){for(var n=0,r=e.length;n<r;n++)if(e[n]==t)return!0;return!1}function extractBooleanFromParam(e,t){return isUndefined(e)?t:bool(e)}function extractStringFromParam(e,t){return isUndefined(e)?t:String(e)}function extractIntFromParam(e,t){if(isUndefined(e))return t;try{var n=parseInt(e,10);return isNaN(n)?t:n}catch(n){return logLog.warn("Invalid int param "+e,n),t}}function extractFunctionFromParam(e,t){return"function"==typeof e?e:t}function isError(e){return e instanceof Error}function handleError(e,t){logLog.error(e,t),log4javascript.dispatchEvent("error",{message:e,exception:t})}function Timer(e,t){this.name=e,this.level=isUndefined(t)?Level.INFO:t,this.start=new Date}function Logger(e){this.name=e,this.parent=null,this.children=[];var t=[],n=null,r=this.name===rootLoggerName,o=this.name===nullLoggerName,i=null,a=!1;this.addChild=function(e){this.children.push(e),e.parent=this,e.invalidateAppenderCache()};var s=!0;this.getAdditivity=function(){return s},this.setAdditivity=function(e){var t=s!=e;s=e,t&&this.invalidateAppenderCache()},this.addAppender=function(e){o?handleError("Logger.addAppender: you may not add an appender to the null logger"):e instanceof log4javascript.Appender?array_contains(t,e)||(t.push(e),e.setAddedToLogger(this),this.invalidateAppenderCache()):handleError("Logger.addAppender: appender supplied ('"+toStr(e)+"') is not a subclass of Appender")},this.removeAppender=function(e){array_remove(t,e),e.setRemovedFromLogger(this),this.invalidateAppenderCache()},this.removeAllAppenders=function(){var e=t.length;if(e>0){for(var n=0;n<e;n++)t[n].setRemovedFromLogger(this);t.length=0,this.invalidateAppenderCache()}},this.getEffectiveAppenders=function(){if(null===i||a){var e=r||!this.getAdditivity()?[]:this.parent.getEffectiveAppenders();i=e.concat(t),a=!1}return i},this.invalidateAppenderCache=function(){a=!0;for(var e=0,t=this.children.length;e<t;e++)this.children[e].invalidateAppenderCache()},this.log=function(e,t){if(enabled&&e.isGreaterOrEqual(this.getEffectiveLevel())){var n,r=t.length-1,o=t[r];t.length>1&&isError(o)&&(n=o,r--);for(var i=[],a=0;a<=r;a++)i[a]=t[a];var s=new LoggingEvent(this,new Date,e,i,n);this.callAppenders(s)}},this.callAppenders=function(e){for(var t=this.getEffectiveAppenders(),n=0,r=t.length;n<r;n++)t[n].doAppend(e)},this.setLevel=function(e){r&&null===e?handleError("Logger.setLevel: you cannot set the level of the root logger to null"):e instanceof Level?n=e:handleError("Logger.setLevel: level supplied to logger "+this.name+" is not an instance of log4javascript.Level")},this.getLevel=function(){return n},this.getEffectiveLevel=function(){for(var e=this;null!==e;e=e.parent){var t=e.getLevel();if(null!==t)return t}},this.group=function(e,t){if(enabled)for(var n=this.getEffectiveAppenders(),r=0,o=n.length;r<o;r++)n[r].group(e,t)},this.groupEnd=function(){if(enabled)for(var e=this.getEffectiveAppenders(),t=0,n=e.length;t<n;t++)e[t].groupEnd()};var l={};this.time=function(e,t){enabled&&(isUndefined(e)?handleError("Logger.time: a name for the timer must be supplied"):!t||t instanceof Level?l[e]=new Timer(e,t):handleError("Logger.time: level supplied to timer "+e+" is not an instance of log4javascript.Level"))},this.timeEnd=function(e){if(enabled)if(isUndefined(e))handleError("Logger.timeEnd: a name for the timer must be supplied");else if(l[e]){var t=l[e],n=t.getElapsedTime();this.log(t.level,["Timer "+toStr(e)+" completed in "+n+"ms"]),delete l[e]}else logLog.warn("Logger.timeEnd: no timer found with name "+e)},this.assert=function(e){if(enabled&&!e){for(var t=[],n=1,r=arguments.length;n<r;n++)t.push(arguments[n]);(t=t.length>0?t:["Assertion Failure"]).push(newLine),t.push(e),this.log(Level.ERROR,t)}},this.toString=function(){return"Logger["+this.name+"]"}}function SimpleLayout(){this.customFields=[]}function NullLayout(){this.customFields=[]}function XmlLayout(e){this.combineMessages=extractBooleanFromParam(e,!0),this.customFields=[]}function escapeNewLines(e){return e.replace(/\r\n|\r|\n/g,"\\r\\n")}function JsonLayout(e,t){this.readable=extractBooleanFromParam(e,!1),this.combineMessages=extractBooleanFromParam(t,!0),this.batchHeader=this.readable?"["+newLine:"[",this.batchFooter=this.readable?"]"+newLine:"]",this.batchSeparator=this.readable?","+newLine:",",this.setKeys(),this.colon=this.readable?": ":":",this.tab=this.readable?"\t":"",this.lineBreak=this.readable?newLine:"",this.customFields=[]}function HttpPostDataLayout(){this.setKeys(),this.customFields=[],this.returnsPostData=!0}function formatObjectExpansion(e,t,n){function r(e,t,n){function i(e){for(var t=splitIntoLines(e),r=1,o=t.length;r<o;r++)t[r]=n+t[r];return t.join(newLine)}var a,s,l,c,d,u,p;if(n||(n=""),null===e)return"null";if(void 0===e)return"undefined";if("string"==typeof e)return i(e);if("object"==typeof e&&array_contains(o,e)){try{u=toStr(e)}catch(e){u="Error formatting property. Details: "+getExceptionStringRep(e)}return u+" [already expanded]"}if(e instanceof Array&&t>0){for(o.push(e),u="["+newLine,l=t-1,c=n+"  ",d=[],a=0,s=e.length;a<s;a++)try{p=r(e[a],l,c),d.push(c+p)}catch(e){d.push(c+"Error formatting array member. Details: "+getExceptionStringRep(e))}return u+=d.join(","+newLine)+newLine+n+"]"}if("[object Date]"==Object.prototype.toString.call(e))return e.toString();if("object"==typeof e&&t>0){o.push(e),u="{"+newLine,l=t-1,c=n+"  ",d=[];for(a in e)try{p=r(e[a],l,c),d.push(c+a+": "+p)}catch(e){d.push(c+a+": Error formatting property. Details: "+getExceptionStringRep(e))}return u+=d.join(","+newLine)+newLine+n+"}"}return i(toStr(e))}var o=[];return r(e,t,n)}function PatternLayout(e){this.pattern=e||PatternLayout.DEFAULT_CONVERSION_PATTERN,this.customFields=[]}function AlertAppender(){}function BrowserConsoleAppender(){}function isHttpRequestSuccessful(e){return isUndefined(e.status)||0===e.status||e.status>=200&&e.status<300||1223==e.status}function AjaxAppender(e,t){function n(e){return!I||(handleError("AjaxAppender: configuration option '"+e+"' may not be set after the appender has been initialized"),!1)}function r(){if(d&&enabled){S=!0;var e;if(p)y.length>0?l(i(e=y.shift()),r):(S=!1,u&&a());else{for(;e=y.shift();)l(i(e));S=!1,u&&a()}}}function o(){var e=!1;if(d&&enabled){for(var t,n=c.getLayout().allowBatching()?h:1,o=[];t=A.shift();)o.push(t),A.length>=n&&(y.push(o),o=[]);o.length>0&&y.push(o),e=y.length>0,p=!1,u=!1,r()}return e}function i(e){for(var t,n=[],r="";t=e.shift();)n.push(c.getLayout().formatWithException(t));return r=1==e.length?n.join(""):c.getLayout().batchHeader+n.join(c.getLayout().batchSeparator)+c.getLayout().batchFooter,T==c.defaults.contentType&&((r=c.getLayout().returnsPostData?r:urlEncode(f)+"="+urlEncode(r)).length>0&&(r+="&"),r+="layout="+urlEncode(c.getLayout().toString())),r}function a(){window.setTimeout(r,g)}function s(){var e="AjaxAppender: could not create XMLHttpRequest object. AjaxAppender disabled";handleError(e),d=!1,E&&E(e)}function l(n,r){try{var o=getXmlHttp(s);if(d){t&&withCredentialsSupported&&(o.withCredentials=!0),o.onreadystatechange=function(){if(4==o.readyState){if(isHttpRequestSuccessful(o))m&&m(o),r&&r(o);else{var t="AjaxAppender.append: XMLHttpRequest request to URL "+e+" returned status code "+o.status;handleError(t),E&&E(t)}o.onreadystatechange=emptyFunction,o=null}},o.open("POST",e,!0);try{for(var i,a=0;i=L[a++];)o.setRequestHeader(i.name,i.value);o.setRequestHeader("Content-Type",T)}catch(e){var l="AjaxAppender.append: your browser's XMLHttpRequest implementation does not support setRequestHeader, therefore cannot post data. AjaxAppender disabled";return handleError(l),d=!1,void(E&&E(l))}o.send(n)}}catch(t){var c="AjaxAppender.append: error sending log message to "+e;handleError(c,t),d=!1,E&&E(c+". Details: "+getExceptionStringRep(t))}}var c=this,d=!0;e||(handleError("AjaxAppender: URL must be specified in constructor"),d=!1);var u=this.defaults.timed,p=this.defaults.waitForResponse,h=this.defaults.batchSize,g=this.defaults.timerInterval,m=this.defaults.requestSuccessCallback,E=this.defaults.failCallback,f=this.defaults.postVarName,v=this.defaults.sendAllOnUnload,T=this.defaults.contentType,C=null,A=[],y=[],L=[],S=!1,I=!1;this.getSessionId=function(){return C},this.setSessionId=function(e){C=extractStringFromParam(e,null),this.layout.setCustomField("sessionid",C)},this.setLayout=function(e){n("layout")&&(this.layout=e,null!==C&&this.setSessionId(C))},this.isTimed=function(){return u},this.setTimed=function(e){n("timed")&&(u=bool(e))},this.getTimerInterval=function(){return g},this.setTimerInterval=function(e){n("timerInterval")&&(g=extractIntFromParam(e,g))},this.isWaitForResponse=function(){return p},this.setWaitForResponse=function(e){n("waitForResponse")&&(p=bool(e))},this.getBatchSize=function(){return h},this.setBatchSize=function(e){n("batchSize")&&(h=extractIntFromParam(e,h))},this.isSendAllOnUnload=function(){return v},this.setSendAllOnUnload=function(e){n("sendAllOnUnload")&&(v=extractBooleanFromParam(e,v))},this.setRequestSuccessCallback=function(e){m=extractFunctionFromParam(e,m)},this.setFailCallback=function(e){E=extractFunctionFromParam(e,E)},this.getPostVarName=function(){return f},this.setPostVarName=function(e){n("postVarName")&&(f=extractStringFromParam(e,f))},this.getHeaders=function(){return L},this.addHeader=function(e,t){"content-type"==e.toLowerCase()?T=t:L.push({name:e,value:t})},this.sendAll=r,this.sendAllRemaining=o,this.append=function(e){if(d){I||function(){if(I=!0,v){var e=window.onbeforeunload;window.onbeforeunload=function(){if(e&&e(),o())return"Sending log messages"}}u&&a()}(),A.push(e);var t=this.getLayout().allowBatching()?h:1;if(A.length>=t){for(var n,i=[];n=A.shift();)i.push(n);y.push(i),u||p&&(!p||S)||r()}}}}function setCookie(e,t,n,r){var o;if(r=r?"; path="+r:"",n){var i=new Date;i.setTime(i.getTime()+24*n*60*60*1e3),o="; expires="+i.toGMTString()}else o="";document.cookie=escape(e)+"="+escape(t)+o+r}function getCookie(e){for(var t=escape(e)+"=",n=document.cookie.split(";"),r=0,o=n.length;r<o;r++){for(var i=n[r];" "===i.charAt(0);)i=i.substring(1,i.length);if(0===i.indexOf(t))return unescape(i.substring(t.length,i.length))}return null}function getBaseUrl(){for(var e=document.getElementsByTagName("script"),t=0,n=e.length;t<n;++t)if(-1!=e[t].src.indexOf("log4javascript")){var r=e[t].src.lastIndexOf("/");return-1==r?"":e[t].src.substr(0,r+1)}return null}function isLoaded(e){try{return bool(e.loaded)}catch(e){return!1}}function padWithSpaces(e,t){if(e.length<t){for(var n=[],r=Math.max(0,t-e.length),o=0;o<r;o++)n[o]=" ";e+=n.join("")}return e}function createDefaultLogger(){var e=log4javascript.getLogger(defaultLoggerName),t=new log4javascript.PopUpAppender;return e.addAppender(t),e}Array.prototype.push||(Array.prototype.push=function(){for(var e=0,t=arguments.length;e<t;e++)this[this.length]=arguments[e];return this.length}),Array.prototype.shift||(Array.prototype.shift=function(){if(this.length>0){for(var e=this[0],t=0,n=this.length-1;t<n;t++)this[t]=this[t+1];return this.length=this.length-1,e}}),Array.prototype.splice||(Array.prototype.splice=function(e,t){var n=this.slice(e+t),r=this.slice(e,e+t);this.length=e;for(var o=[],i=0,a=arguments.length;i<a;i++)o[i]=arguments[i];var s=o.length>2?n=o.slice(2).concat(n):n;for(i=0,a=s.length;i<a;i++)this.push(s[i]);return r}),EventSupport.prototype={eventTypes:[],eventListeners:{},setEventTypes:function(e){if(e instanceof Array){this.eventTypes=e,this.eventListeners={};for(var t=0,n=this.eventTypes.length;t<n;t++)this.eventListeners[this.eventTypes[t]]=[]}else handleError("log4javascript.EventSupport ["+this+"]: setEventTypes: eventTypes parameter must be an Array")},addEventListener:function(e,t){"function"==typeof t?(array_contains(this.eventTypes,e)||handleError("log4javascript.EventSupport ["+this+"]: addEventListener: no event called '"+e+"'"),this.eventListeners[e].push(t)):handleError("log4javascript.EventSupport ["+this+"]: addEventListener: listener must be a function")},removeEventListener:function(e,t){"function"==typeof t?(array_contains(this.eventTypes,e)||handleError("log4javascript.EventSupport ["+this+"]: removeEventListener: no event called '"+e+"'"),array_remove(this.eventListeners[e],t)):handleError("log4javascript.EventSupport ["+this+"]: removeEventListener: listener must be a function")},dispatchEvent:function(e,t){if(array_contains(this.eventTypes,e))for(var n=this.eventListeners[e],r=0,o=n.length;r<o;r++)n[r](this,e,t);else handleError("log4javascript.EventSupport ["+this+"]: dispatchEvent: no event called '"+e+"'")}};var applicationStartDate=new Date,uniqueId="log4javascript_"+applicationStartDate.getTime()+"_"+Math.floor(1e8*Math.random()),emptyFunction=function(){},newLine="\r\n",pageLoaded=!1;Log4JavaScript.prototype=new EventSupport;var log4javascript=new Log4JavaScript;log4javascript.version="1.4.10",log4javascript.edition="log4javascript";var urlEncode=void 0!==window.encodeURIComponent?function(e){return encodeURIComponent(e)}:function(e){return escape(e).replace(/\+/g,"%2B").replace(/"/g,"%22").replace(/'/g,"%27").replace(/\//g,"%2F").replace(/=/g,"%3D")};Function.prototype.apply||(Function.prototype.apply=function(obj,args){var methodName="__apply__";void 0!==obj[methodName]&&(methodName+=String(Math.random()).substr(2)),obj[methodName]=this;for(var argsStrings=[],i=0,len=args.length;i<len;i++)argsStrings[i]="args["+i+"]";var script="obj."+methodName+"("+argsStrings.join(",")+")",returnValue=eval(script);return delete obj[methodName],returnValue}),Function.prototype.call||(Function.prototype.call=function(e){for(var t=[],n=1,r=arguments.length;n<r;n++)t[n-1]=arguments[n];return this.apply(e,t)});var logLog={quietMode:!1,debugMessages:[],setQuietMode:function(e){this.quietMode=bool(e)},numberOfErrors:0,alertAllErrors:!1,setAlertAllErrors:function(e){this.alertAllErrors=e},debug:function(e){this.debugMessages.push(e)},displayDebug:function(){alert(this.debugMessages.join(newLine))},warn:function(e,t){},error:function(e,t){if((1==++this.numberOfErrors||this.alertAllErrors)&&!this.quietMode){var n="log4javascript error: "+e;t&&(n+=newLine+newLine+"Original error: "+getExceptionStringRep(t)),alert(n)}}};log4javascript.logLog=logLog,log4javascript.setEventTypes(["load","error"]),log4javascript.handleError=handleError;var enabled=!("undefined"!=typeof log4javascript_disabled&&log4javascript_disabled);log4javascript.setEnabled=function(e){enabled=bool(e)},log4javascript.isEnabled=function(){return enabled};var useTimeStampsInMilliseconds=!0;log4javascript.setTimeStampsInMilliseconds=function(e){useTimeStampsInMilliseconds=bool(e)},log4javascript.isTimeStampsInMilliseconds=function(){return useTimeStampsInMilliseconds},log4javascript.evalInScope=function(expr){return eval(expr)};var showStackTraces=!1;log4javascript.setShowStackTraces=function(e){showStackTraces=bool(e)};var Level=function(e,t){this.level=e,this.name=t};Level.prototype={toString:function(){return this.name},equals:function(e){return this.level==e.level},isGreaterOrEqual:function(e){return this.level>=e.level}},Level.ALL=new Level(Number.MIN_VALUE,"ALL"),Level.TRACE=new Level(1e4,"TRACE"),Level.DEBUG=new Level(2e4,"DEBUG"),Level.INFO=new Level(3e4,"INFO"),Level.WARN=new Level(4e4,"WARN"),Level.ERROR=new Level(5e4,"ERROR"),Level.FATAL=new Level(6e4,"FATAL"),Level.OFF=new Level(Number.MAX_VALUE,"OFF"),log4javascript.Level=Level,Timer.prototype.getElapsedTime=function(){return(new Date).getTime()-this.start.getTime()};var anonymousLoggerName="[anonymous]",defaultLoggerName="[default]",nullLoggerName="[null]",rootLoggerName="root";Logger.prototype={trace:function(){this.log(Level.TRACE,arguments)},debug:function(){this.log(Level.DEBUG,arguments)},info:function(){this.log(Level.INFO,arguments)},warn:function(){this.log(Level.WARN,arguments)},error:function(){this.log(Level.ERROR,arguments)},fatal:function(){this.log(Level.FATAL,arguments)},isEnabledFor:function(e){return e.isGreaterOrEqual(this.getEffectiveLevel())},isTraceEnabled:function(){return this.isEnabledFor(Level.TRACE)},isDebugEnabled:function(){return this.isEnabledFor(Level.DEBUG)},isInfoEnabled:function(){return this.isEnabledFor(Level.INFO)},isWarnEnabled:function(){return this.isEnabledFor(Level.WARN)},isErrorEnabled:function(){return this.isEnabledFor(Level.ERROR)},isFatalEnabled:function(){return this.isEnabledFor(Level.FATAL)}},Logger.prototype.trace.isEntryPoint=!0,Logger.prototype.debug.isEntryPoint=!0,Logger.prototype.info.isEntryPoint=!0,Logger.prototype.warn.isEntryPoint=!0,Logger.prototype.error.isEntryPoint=!0,Logger.prototype.fatal.isEntryPoint=!0;var loggers={},loggerNames=[],ROOT_LOGGER_DEFAULT_LEVEL=Level.DEBUG,rootLogger=new Logger(rootLoggerName);rootLogger.setLevel(ROOT_LOGGER_DEFAULT_LEVEL),log4javascript.getRootLogger=function(){return rootLogger},log4javascript.getLogger=function(e){if("string"!=typeof e&&(e=anonymousLoggerName,logLog.warn("log4javascript.getLogger: non-string logger name "+toStr(e)+" supplied, returning anonymous logger")),e==rootLoggerName&&handleError("log4javascript.getLogger: root logger may not be obtained by name"),!loggers[e]){var t=new Logger(e);loggers[e]=t,loggerNames.push(e);var n,r=e.lastIndexOf(".");if(r>-1){var o=e.substring(0,r);n=log4javascript.getLogger(o)}else n=rootLogger;n.addChild(t)}return loggers[e]};var defaultLogger=null;log4javascript.getDefaultLogger=function(){return defaultLogger||(defaultLogger=createDefaultLogger()),defaultLogger};var nullLogger=null;log4javascript.getNullLogger=function(){return nullLogger||(nullLogger=new Logger(nullLoggerName)).setLevel(Level.OFF),nullLogger},log4javascript.resetConfiguration=function(){rootLogger.setLevel(ROOT_LOGGER_DEFAULT_LEVEL),loggers={}};var LoggingEvent=function(e,t,n,r,o){this.logger=e,this.timeStamp=t,this.timeStampInMilliseconds=t.getTime(),this.timeStampInSeconds=Math.floor(this.timeStampInMilliseconds/1e3),this.milliseconds=this.timeStamp.getMilliseconds(),this.level=n,this.messages=r,this.exception=o};LoggingEvent.prototype={getThrowableStrRep:function(){return this.exception?getExceptionStringRep(this.exception):""},getCombinedMessages:function(){return 1==this.messages.length?this.messages[0]:this.messages.join(newLine)},toString:function(){return"LoggingEvent["+this.level+"]"}},log4javascript.LoggingEvent=LoggingEvent;var Layout=function(){};Layout.prototype={defaults:{loggerKey:"logger",timeStampKey:"timestamp",millisecondsKey:"milliseconds",levelKey:"level",messageKey:"message",exceptionKey:"exception",urlKey:"url"},loggerKey:"logger",timeStampKey:"timestamp",millisecondsKey:"milliseconds",levelKey:"level",messageKey:"message",exceptionKey:"exception",urlKey:"url",batchHeader:"",batchFooter:"",batchSeparator:"",returnsPostData:!1,overrideTimeStampsSetting:!1,useTimeStampsInMilliseconds:null,format:function(){handleError("Layout.format: layout supplied has no format() method")},ignoresThrowable:function(){handleError("Layout.ignoresThrowable: layout supplied has no ignoresThrowable() method")},getContentType:function(){return"text/plain"},allowBatching:function(){return!0},setTimeStampsInMilliseconds:function(e){this.overrideTimeStampsSetting=!0,this.useTimeStampsInMilliseconds=bool(e)},isTimeStampsInMilliseconds:function(){return this.overrideTimeStampsSetting?this.useTimeStampsInMilliseconds:useTimeStampsInMilliseconds},getTimeStampValue:function(e){return this.isTimeStampsInMilliseconds()?e.timeStampInMilliseconds:e.timeStampInSeconds},getDataValues:function(e,t){var n=[[this.loggerKey,e.logger.name],[this.timeStampKey,this.getTimeStampValue(e)],[this.levelKey,e.level.name],[this.urlKey,window.location.href],[this.messageKey,t?e.getCombinedMessages():e.messages]];if(this.isTimeStampsInMilliseconds()||n.push([this.millisecondsKey,e.milliseconds]),e.exception&&n.push([this.exceptionKey,getExceptionStringRep(e.exception)]),this.hasCustomFields())for(var r=0,o=this.customFields.length;r<o;r++){var i=this.customFields[r].value;"function"==typeof i&&(i=i(this,e)),n.push([this.customFields[r].name,i])}return n},setKeys:function(e,t,n,r,o,i,a){this.loggerKey=extractStringFromParam(e,this.defaults.loggerKey),this.timeStampKey=extractStringFromParam(t,this.defaults.timeStampKey),this.levelKey=extractStringFromParam(n,this.defaults.levelKey),this.messageKey=extractStringFromParam(r,this.defaults.messageKey),this.exceptionKey=extractStringFromParam(o,this.defaults.exceptionKey),this.urlKey=extractStringFromParam(i,this.defaults.urlKey),this.millisecondsKey=extractStringFromParam(a,this.defaults.millisecondsKey)},setCustomField:function(e,t){for(var n=!1,r=0,o=this.customFields.length;r<o;r++)this.customFields[r].name===e&&(this.customFields[r].value=t,n=!0);n||this.customFields.push({name:e,value:t})},hasCustomFields:function(){return this.customFields.length>0},formatWithException:function(e){var t=this.format(e);return e.exception&&this.ignoresThrowable()&&(t+=e.getThrowableStrRep()),t},toString:function(){handleError("Layout.toString: all layouts must override this method")}},log4javascript.Layout=Layout;var Appender=function(){};Appender.prototype=new EventSupport,Appender.prototype.layout=new PatternLayout,Appender.prototype.threshold=Level.ALL,Appender.prototype.loggers=[],Appender.prototype.doAppend=function(e){enabled&&e.level.level>=this.threshold.level&&this.append(e)},Appender.prototype.append=function(e){},Appender.prototype.setLayout=function(e){e instanceof Layout?this.layout=e:handleError("Appender.setLayout: layout supplied to "+this.toString()+" is not a subclass of Layout")},Appender.prototype.getLayout=function(){return this.layout},Appender.prototype.setThreshold=function(e){e instanceof Level?this.threshold=e:handleError("Appender.setThreshold: threshold supplied to "+this.toString()+" is not a subclass of Level")},Appender.prototype.getThreshold=function(){return this.threshold},Appender.prototype.setAddedToLogger=function(e){this.loggers.push(e)},Appender.prototype.setRemovedFromLogger=function(e){array_remove(this.loggers,e)},Appender.prototype.group=emptyFunction,Appender.prototype.groupEnd=emptyFunction,Appender.prototype.toString=function(){handleError("Appender.toString: all appenders must override this method")},log4javascript.Appender=Appender,SimpleLayout.prototype=new Layout,SimpleLayout.prototype.format=function(e){return e.level.name+" - "+e.getCombinedMessages()},SimpleLayout.prototype.ignoresThrowable=function(){return!0},SimpleLayout.prototype.toString=function(){return"SimpleLayout"},log4javascript.SimpleLayout=SimpleLayout,NullLayout.prototype=new Layout,NullLayout.prototype.format=function(e){return e.messages},NullLayout.prototype.ignoresThrowable=function(){return!0},NullLayout.prototype.formatWithException=function(e){var t=e.messages,n=e.exception;return n?t.concat([n]):t},NullLayout.prototype.toString=function(){return"NullLayout"},log4javascript.NullLayout=NullLayout,XmlLayout.prototype=new Layout,XmlLayout.prototype.isCombinedMessages=function(){return this.combineMessages},XmlLayout.prototype.getContentType=function(){return"text/xml"},XmlLayout.prototype.escapeCdata=function(e){return e.replace(/\]\]>/,"]]>]]&gt;<![CDATA[")},XmlLayout.prototype.format=function(e){function t(e){return e="string"==typeof e?e:toStr(e),"<log4javascript:message><![CDATA["+o.escapeCdata(e)+"]]></log4javascript:message>"}var n,r,o=this,i='<log4javascript:event logger="'+e.logger.name+'" timestamp="'+this.getTimeStampValue(e)+'"';if(this.isTimeStampsInMilliseconds()||(i+=' milliseconds="'+e.milliseconds+'"'),i+=' level="'+e.level.name+'">'+newLine,this.combineMessages)i+=t(e.getCombinedMessages());else{for(i+="<log4javascript:messages>"+newLine,n=0,r=e.messages.length;n<r;n++)i+=t(e.messages[n])+newLine;i+="</log4javascript:messages>"+newLine}if(this.hasCustomFields())for(n=0,r=this.customFields.length;n<r;n++)i+='<log4javascript:customfield name="'+this.customFields[n].name+'"><![CDATA['+this.customFields[n].value.toString()+"]]></log4javascript:customfield>"+newLine;return e.exception&&(i+="<log4javascript:exception><![CDATA["+getExceptionStringRep(e.exception)+"]]></log4javascript:exception>"+newLine),i+="</log4javascript:event>"+newLine+newLine},XmlLayout.prototype.ignoresThrowable=function(){return!1},XmlLayout.prototype.toString=function(){return"XmlLayout"},log4javascript.XmlLayout=XmlLayout,JsonLayout.prototype=new Layout,JsonLayout.prototype.isReadable=function(){return this.readable},JsonLayout.prototype.isCombinedMessages=function(){return this.combineMessages},JsonLayout.prototype.format=function(e){function t(e,n,r){var i,a=typeof e;if(e instanceof Date)i=String(e.getTime());else if(r&&e instanceof Array){i="["+o.lineBreak;for(var s=0,l=e.length;s<l;s++){var c=n+o.tab;i+=c+t(e[s],c,!1),s<e.length-1&&(i+=","),i+=o.lineBreak}i+=n+"]"}else i="number"!==a&&"boolean"!==a?'"'+escapeNewLines(toStr(e).replace(/\"/g,'\\"'))+'"':e;return i}var n,r,o=this,i=this.getDataValues(e,this.combineMessages),a="{"+this.lineBreak;for(n=0,r=i.length-1;n<=r;n++)a+=this.tab+'"'+i[n][0]+'"'+this.colon+t(i[n][1],this.tab,!0),n<r&&(a+=","),a+=this.lineBreak;return a+="}"+this.lineBreak},JsonLayout.prototype.ignoresThrowable=function(){return!1},JsonLayout.prototype.toString=function(){return"JsonLayout"},JsonLayout.prototype.getContentType=function(){return"application/json"},log4javascript.JsonLayout=JsonLayout,HttpPostDataLayout.prototype=new Layout,HttpPostDataLayout.prototype.allowBatching=function(){return!1},HttpPostDataLayout.prototype.format=function(e){for(var t=this.getDataValues(e),n=[],r=0,o=t.length;r<o;r++){var i=t[r][1]instanceof Date?String(t[r][1].getTime()):t[r][1];n.push(urlEncode(t[r][0])+"="+urlEncode(i))}return n.join("&")},HttpPostDataLayout.prototype.ignoresThrowable=function(e){return!1},HttpPostDataLayout.prototype.toString=function(){return"HttpPostDataLayout"},log4javascript.HttpPostDataLayout=HttpPostDataLayout;var SimpleDateFormat;!function(){var e=/('[^']*')|(G+|y+|M+|w+|W+|D+|d+|F+|E+|a+|H+|k+|K+|h+|m+|s+|S+|Z+)|([a-zA-Z]+)|([^a-zA-Z']+)/,t=["January","February","March","April","May","June","July","August","September","October","November","December"],n=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],r={G:0,y:3,M:4,w:2,W:2,D:2,d:2,F:2,E:1,a:0,H:2,k:2,K:2,h:2,m:2,s:2,S:2,Z:5},o=function(e,t,n){var r=new Date(e,t,n,0,0,0);return r.setMilliseconds(0),r};Date.prototype.getDifference=function(e){return this.getTime()-e.getTime()},Date.prototype.isBefore=function(e){return this.getTime()<e.getTime()},Date.prototype.getUTCTime=function(){return Date.UTC(this.getFullYear(),this.getMonth(),this.getDate(),this.getHours(),this.getMinutes(),this.getSeconds(),this.getMilliseconds())},Date.prototype.getTimeSince=function(e){return this.getUTCTime()-e.getUTCTime()},Date.prototype.getPreviousSunday=function(){var e=new Date(this.getFullYear(),this.getMonth(),this.getDate(),12,0,0),t=new Date(e.getTime()-864e5*this.getDay());return o(t.getFullYear(),t.getMonth(),t.getDate())},Date.prototype.getWeekInYear=function(e){isUndefined(this.minimalDaysInFirstWeek)&&(e=1);var t=this.getPreviousSunday(),n=o(this.getFullYear(),0,1),r=t.isBefore(n)?0:1+Math.floor(t.getTimeSince(n)/6048e5);return 7-n.getDay()<e&&r--,r},Date.prototype.getWeekInMonth=function(e){isUndefined(this.minimalDaysInFirstWeek)&&(e=1);var t=this.getPreviousSunday(),n=o(this.getFullYear(),this.getMonth(),1),r=t.isBefore(n)?0:1+Math.floor(t.getTimeSince(n)/6048e5);return 7-n.getDay()>=e&&r++,r},Date.prototype.getDayInYear=function(){var e=o(this.getFullYear(),0,1);return 1+Math.floor(this.getTimeSince(e)/864e5)},(SimpleDateFormat=function(e){this.formatString=e}).prototype.setMinimalDaysInFirstWeek=function(e){this.minimalDaysInFirstWeek=e},SimpleDateFormat.prototype.getMinimalDaysInFirstWeek=function(){return isUndefined(this.minimalDaysInFirstWeek)?1:this.minimalDaysInFirstWeek};var i=function(e,t){for(;e.length<t;)e="0"+e;return e},a=function(e,t,n){return t>=4?e:e.substr(0,Math.max(n,t))},s=function(e,t){return i(""+e,t)};SimpleDateFormat.prototype.format=function(o){for(var l,c="",d=this.formatString;l=e.exec(d);){var u=l[1],p=l[2],h=l[3],g=l[4];if(u)c+="''"==u?"'":u.substring(1,u.length-1);else if(h);else if(g)c+=g;else if(p){var m=p.charAt(0),E=p.length,f="";switch(m){case"G":f="AD";break;case"y":f=o.getFullYear();break;case"M":f=o.getMonth();break;case"w":f=o.getWeekInYear(this.getMinimalDaysInFirstWeek());break;case"W":f=o.getWeekInMonth(this.getMinimalDaysInFirstWeek());break;case"D":f=o.getDayInYear();break;case"d":f=o.getDate();break;case"F":f=1+Math.floor((o.getDate()-1)/7);break;case"E":f=n[o.getDay()];break;case"a":f=o.getHours()>=12?"PM":"AM";break;case"H":f=o.getHours();break;case"k":f=o.getHours()||24;break;case"K":f=o.getHours()%12;break;case"h":f=o.getHours()%12||12;break;case"m":f=o.getMinutes();break;case"s":f=o.getSeconds();break;case"S":f=o.getMilliseconds();break;case"Z":f=o.getTimezoneOffset()}switch(r[m]){case 0:c+=a(f,E,2);break;case 1:c+=a(f,E,3);break;case 2:c+=s(f,E);break;case 3:if(E<=3){c+=(""+f).substr(2,2)}else c+=s(f,E);break;case 4:c+=E>=3?a(t[f],E,E):s(f+1,E);break;case 5:var v=f>0?"-":"+",T=Math.abs(f),C=""+Math.floor(T/60),A=""+T%60;c+=v+(C=i(C,2))+(A=i(A,2))}}d=d.substr(l.index+l[0].length)}return c}}(),log4javascript.SimpleDateFormat=SimpleDateFormat,PatternLayout.TTCC_CONVERSION_PATTERN="%r %p %c - %m%n",PatternLayout.DEFAULT_CONVERSION_PATTERN="%m%n",PatternLayout.ISO8601_DATEFORMAT="yyyy-MM-dd HH:mm:ss,SSS",PatternLayout.DATETIME_DATEFORMAT="dd MMM yyyy HH:mm:ss,SSS",PatternLayout.ABSOLUTETIME_DATEFORMAT="HH:mm:ss,SSS",PatternLayout.prototype=new Layout,PatternLayout.prototype.format=function(e){for(var t,n=/%(-?[0-9]+)?(\.?[0-9]+)?([acdfmMnpr%])(\{([^\}]+)\})?|([^%]+)/,r="",o=this.pattern;t=n.exec(o);){var i=t[0],a=t[1],s=t[2],l=t[3],c=t[5],d=t[6];if(d)r+=""+d;else{var u="";switch(l){case"a":case"m":var p=0;c&&(p=parseInt(c,10),isNaN(p)&&(handleError("PatternLayout.format: invalid specifier '"+c+"' for conversion character '"+l+"' - should be a number"),p=0));for(var h="a"===l?e.messages[0]:e.messages,g=0,m=h.length;g<m;g++)g>0&&" "!==u.charAt(u.length-1)&&(u+=" "),u+=0===p?h[g]:formatObjectExpansion(h[g],p);break;case"c":var E=e.logger.name;if(c){var f=parseInt(c,10),v=e.logger.name.split(".");u=f>=v.length?E:v.slice(v.length-f).join(".")}else u=E;break;case"d":var T=PatternLayout.ISO8601_DATEFORMAT;c&&("ISO8601"==(T=c)?T=PatternLayout.ISO8601_DATEFORMAT:"ABSOLUTE"==T?T=PatternLayout.ABSOLUTETIME_DATEFORMAT:"DATE"==T&&(T=PatternLayout.DATETIME_DATEFORMAT)),u=new SimpleDateFormat(T).format(e.timeStamp);break;case"f":if(this.hasCustomFields()){var C=0;c&&(C=parseInt(c,10),isNaN(C)?handleError("PatternLayout.format: invalid specifier '"+c+"' for conversion character 'f' - should be a number"):0===C?handleError("PatternLayout.format: invalid specifier '"+c+"' for conversion character 'f' - must be greater than zero"):C>this.customFields.length?handleError("PatternLayout.format: invalid specifier '"+c+"' for conversion character 'f' - there aren't that many custom fields"):C-=1);var A=this.customFields[C].value;"function"==typeof A&&(A=A(this,e)),u=A}break;case"n":u=newLine;break;case"p":u=e.level.name;break;case"r":u=""+e.timeStamp.getDifference(applicationStartDate);break;case"%":u="%";break;default:u=i}var y;if(s){y=parseInt(s.substr(1),10);var L=u.length;y<L&&(u=u.substring(L-y,L))}if(a)if("-"==a.charAt(0))for(y=parseInt(a.substr(1),10);u.length<y;)u+=" ";else for(y=parseInt(a,10);u.length<y;)u=" "+u;r+=u}o=o.substr(t.index+t[0].length)}return r},PatternLayout.prototype.ignoresThrowable=function(){return!0},PatternLayout.prototype.toString=function(){return"PatternLayout"},log4javascript.PatternLayout=PatternLayout,AlertAppender.prototype=new Appender,AlertAppender.prototype.layout=new SimpleLayout,AlertAppender.prototype.append=function(e){alert(this.getLayout().formatWithException(e))},AlertAppender.prototype.toString=function(){return"AlertAppender"},log4javascript.AlertAppender=AlertAppender,BrowserConsoleAppender.prototype=new log4javascript.Appender,BrowserConsoleAppender.prototype.layout=new NullLayout,BrowserConsoleAppender.prototype.threshold=Level.DEBUG,BrowserConsoleAppender.prototype.append=function(e){var t,n=this,r=function(){var t=n.getLayout().formatWithException(e);return"string"==typeof t?[t]:t};if((t=window.console)&&t.log){var o,i=r();t[o=t.debug&&Level.DEBUG.isGreaterOrEqual(e.level)?"debug":t.info&&Level.INFO.equals(e.level)?"info":t.warn&&Level.WARN.equals(e.level)?"warn":t.error&&e.level.isGreaterOrEqual(Level.ERROR)?"error":"log"].apply?t[o].apply(t,i):t[o](i)}else"undefined"!=typeof opera&&opera.postError&&opera.postError(r())},BrowserConsoleAppender.prototype.group=function(e){window.console&&window.console.group&&window.console.group(e)},BrowserConsoleAppender.prototype.groupEnd=function(){window.console&&window.console.groupEnd&&window.console.groupEnd()},BrowserConsoleAppender.prototype.toString=function(){return"BrowserConsoleAppender"},log4javascript.BrowserConsoleAppender=BrowserConsoleAppender;var xhrFactory=function(){return new XMLHttpRequest},xmlHttpFactories=[xhrFactory,function(){return new ActiveXObject("Msxml2.XMLHTTP")},function(){return new ActiveXObject("Microsoft.XMLHTTP")}],withCredentialsSupported=!1,getXmlHttp=function(e){for(var t,n=null,r=0,o=xmlHttpFactories.length;r<o;r++){t=xmlHttpFactories[r];try{return n=t(),withCredentialsSupported=t==xhrFactory&&"withCredentials"in n,getXmlHttp=t,n}catch(e){}}e?e():handleError("getXmlHttp: unable to obtain XMLHttpRequest object")};AjaxAppender.prototype=new Appender,AjaxAppender.prototype.defaults={waitForResponse:!1,timed:!1,timerInterval:1e3,batchSize:1,sendAllOnUnload:!1,requestSuccessCallback:null,failCallback:null,postVarName:"data",contentType:"application/x-www-form-urlencoded"},AjaxAppender.prototype.layout=new HttpPostDataLayout,AjaxAppender.prototype.toString=function(){return"AjaxAppender"},log4javascript.AjaxAppender=AjaxAppender;var ConsoleAppender;if(function(){function e(e,t,n,r,o){this.create(!1,null,e,t,n,r,o,this.defaults.focusPopUp)}function t(e,t,n,r,o,i){this.create(!0,e,t,n,r,o,i,!1)}var n=[],r=1;(ConsoleAppender=function(){}).prototype=new Appender,ConsoleAppender.prototype.create=function(e,t,o,i,a,s,l,c){function d(e,t){this.loggingEvent=e,this.levelName=e.level.name,this.formattedMessage=t}function u(e,t){this.name=e,this.initiallyExpanded=t}function p(){}var h=this,g=!1,m=!1,E=!1,f=!1,v=[],T=!0,C=r++;i=extractBooleanFromParam(i,this.defaults.initiallyMinimized),o=extractBooleanFromParam(o,this.defaults.lazyInit),a=extractBooleanFromParam(a,this.defaults.useDocumentWrite);var A=this.defaults.newestMessageAtTop,y=this.defaults.scrollToLatestMessage;s=s||this.defaults.width,l=l||this.defaults.height;var L=this.defaults.maxMessages,S=this.defaults.showCommandLine,I=this.defaults.commandLineObjectExpansionDepth,D=this.defaults.showHideButton,R=this.defaults.showCloseButton;this.setLayout(this.defaults.layout);var M,b,N,_,x,O=e?"InPageAppender":"PopUpAppender",w=function(e){return!m||(handleError(O+": configuration option '"+e+"' may not be set after the appender has been initialized"),!1)},P=function(){return E&&T&&!f};this.isNewestMessageAtTop=function(){return A},this.setNewestMessageAtTop=function(e){A=bool(e),P()&&_().setNewestAtTop(A)},this.isScrollToLatestMessage=function(){return y},this.setScrollToLatestMessage=function(e){y=bool(e),P()&&_().setScrollToLatest(y)},this.getWidth=function(){return s},this.setWidth=function(e){w("width")&&(s=extractStringFromParam(e,s))},this.getHeight=function(){return l},this.setHeight=function(e){w("height")&&(l=extractStringFromParam(e,l))},this.getMaxMessages=function(){return L},this.setMaxMessages=function(e){L=extractIntFromParam(e,L),P()&&_().setMaxMessages(L)},this.isShowCommandLine=function(){return S},this.setShowCommandLine=function(e){S=bool(e),P()&&_().setShowCommandLine(S)},this.isShowHideButton=function(){return D},this.setShowHideButton=function(e){D=bool(e),P()&&_().setShowHideButton(D)},this.isShowCloseButton=function(){return R},this.setShowCloseButton=function(e){R=bool(e),P()&&_().setShowCloseButton(R)},this.getCommandLineObjectExpansionDepth=function(){return I},this.setCommandLineObjectExpansionDepth=function(e){I=extractIntFromParam(e,I)};var B=i;this.isInitiallyMinimized=function(){return i},this.setInitiallyMinimized=function(e){w("initiallyMinimized")&&(i=bool(e),B=i)},this.isUseDocumentWrite=function(){return a},this.setUseDocumentWrite=function(e){w("useDocumentWrite")&&(a=bool(e))},d.prototype.append=function(){_().log(this.levelName,this.formattedMessage)},u.prototype.append=function(){_().group(this.name,this.initiallyExpanded)},p.prototype.append=function(){_().groupEnd()};var F=function(){N(),g?f&&ee&&b():M(),N()&&U()};this.append=function(e){if(T){var t=h.getLayout().formatWithException(e);v.push(new d(e,t)),F()}},this.group=function(e,t){T&&(v.push(new u(e,t)),F())},this.groupEnd=function(){T&&(v.push(new p),F())};var U=function(){for(;v.length>0;)v.shift().append();c&&_().focus()};this.setAddedToLogger=function(e){this.loggers.push(e),enabled&&!o&&M()},this.clear=function(){P()&&_().clearLog(),v.length=0},this.focus=function(){P()&&_().focus()},this.focusCommandLine=function(){P()&&_().focusCommandLine()},this.focusSearch=function(){P()&&_().focusSearch()};var k=window;this.getCommandWindow=function(){return k},this.setCommandWindow=function(e){k=e},this.executeLastCommand=function(){P()&&_().evalLastCommand()};var G=new PatternLayout("%m");this.getCommandLayout=function(){return G},this.setCommandLayout=function(e){G=e},this.evalCommandAndAppend=function(e){var t={appendResult:!0,isError:!1},n="";try{var r,o;!k.eval&&k.execScript&&k.execScript("null");var i={};for(o=0,len=H.length;o<len;o++)i[H[o][0]]=H[o][1];var a=[],s=function(e){a.push([e,k[e]])};s("appender"),k.appender=h,s("commandReturnValue"),k.commandReturnValue=t,s("commandLineFunctionsHash"),k.commandLineFunctionsHash=i;var l=function(e){s(e),k[e]=function(){return this.commandLineFunctionsHash[e](h,arguments,t)}};for(o=0,len=H.length;o<len;o++)l(H[o][0]);for(k===window&&k.execScript?(s("evalExpr"),s("result"),window.evalExpr=e,k.execScript("window.result=eval(window.evalExpr);"),r=window.result):r=k.eval(e),n=isUndefined(r)?r:formatObjectExpansion(r,I),o=0,len=a.length;o<len;o++)k[a[o][0]]=a[o][1]}catch(e){n="Error evaluating command: "+getExceptionStringRep(e),t.isError=!0}if(t.appendResult){var c=">>> "+e;isUndefined(n)||(c+=newLine+n);var d=t.isError?Level.ERROR:Level.INFO,u=new LoggingEvent(null,new Date,d,[c],null),p=this.getLayout();this.setLayout(G),this.append(u),this.setLayout(p)}};var H=n.concat([]);this.addCommandLineFunction=function(e,t){H.push([e,t])};var j="log4javascriptCommandHistory";this.storeCommandHistory=function(e){setCookie(j,e.join(","))};var W=function(e){var t=['<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">','<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">',"<head>","<title>log4javascript</title>",'<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />',"\x3c!-- Make IE8 behave like IE7, having gone to all the trouble of making IE work --\x3e",'<meta http-equiv="X-UA-Compatible" content="IE=7" />','<script type="text/javascript">var isIe = false, isIePre7 = false;<\/script>','\x3c!--[if IE]><script type="text/javascript">isIe = true<\/script><![endif]--\x3e','\x3c!--[if lt IE 7]><script type="text/javascript">isIePre7 = true<\/script><![endif]--\x3e','<script type="text/javascript">',"//<![CDATA[","var loggingEnabled=true;var logQueuedEventsTimer=null;var logEntries=[];var logEntriesAndSeparators=[];var logItems=[];var renderDelay=100;var unrenderedLogItemsExist=false;var rootGroup,currentGroup=null;var loaded=false;var currentLogItem=null;var logMainContainer;function copyProperties(obj,props){for(var i in props){obj[i]=props[i];}}","function LogItem(){}","LogItem.prototype={mainContainer:null,wrappedContainer:null,unwrappedContainer:null,group:null,appendToLog:function(){for(var i=0,len=this.elementContainers.length;i<len;i++){this.elementContainers[i].appendToLog();}","this.group.update();},doRemove:function(doUpdate,removeFromGroup){if(this.rendered){for(var i=0,len=this.elementContainers.length;i<len;i++){this.elementContainers[i].remove();}","this.unwrappedElementContainer=null;this.wrappedElementContainer=null;this.mainElementContainer=null;}","if(this.group&&removeFromGroup){this.group.removeChild(this,doUpdate);}","if(this===currentLogItem){currentLogItem=null;}},remove:function(doUpdate,removeFromGroup){this.doRemove(doUpdate,removeFromGroup);},render:function(){},accept:function(visitor){visitor.visit(this);},getUnwrappedDomContainer:function(){return this.group.unwrappedElementContainer.contentDiv;},getWrappedDomContainer:function(){return this.group.wrappedElementContainer.contentDiv;},getMainDomContainer:function(){return this.group.mainElementContainer.contentDiv;}};LogItem.serializedItemKeys={LOG_ENTRY:0,GROUP_START:1,GROUP_END:2};function LogItemContainerElement(){}",'LogItemContainerElement.prototype={appendToLog:function(){var insertBeforeFirst=(newestAtTop&&this.containerDomNode.hasChildNodes());if(insertBeforeFirst){this.containerDomNode.insertBefore(this.mainDiv,this.containerDomNode.firstChild);}else{this.containerDomNode.appendChild(this.mainDiv);}}};function SeparatorElementContainer(containerDomNode){this.containerDomNode=containerDomNode;this.mainDiv=document.createElement("div");this.mainDiv.className="separator";this.mainDiv.innerHTML="&nbsp;";}',"SeparatorElementContainer.prototype=new LogItemContainerElement();SeparatorElementContainer.prototype.remove=function(){this.mainDiv.parentNode.removeChild(this.mainDiv);this.mainDiv=null;};function Separator(){this.rendered=false;}","Separator.prototype=new LogItem();copyProperties(Separator.prototype,{render:function(){var containerDomNode=this.group.contentDiv;if(isIe){this.unwrappedElementContainer=new SeparatorElementContainer(this.getUnwrappedDomContainer());this.wrappedElementContainer=new SeparatorElementContainer(this.getWrappedDomContainer());this.elementContainers=[this.unwrappedElementContainer,this.wrappedElementContainer];}else{this.mainElementContainer=new SeparatorElementContainer(this.getMainDomContainer());this.elementContainers=[this.mainElementContainer];}",'this.content=this.formattedMessage;this.rendered=true;}});function GroupElementContainer(group,containerDomNode,isRoot,isWrapped){this.group=group;this.containerDomNode=containerDomNode;this.isRoot=isRoot;this.isWrapped=isWrapped;this.expandable=false;if(this.isRoot){if(isIe){this.contentDiv=logMainContainer.appendChild(document.createElement("div"));this.contentDiv.id=this.isWrapped?"log_wrapped":"log_unwrapped";}else{this.contentDiv=logMainContainer;}}else{var groupElementContainer=this;this.mainDiv=document.createElement("div");this.mainDiv.className="group";this.headingDiv=this.mainDiv.appendChild(document.createElement("div"));this.headingDiv.className="groupheading";this.expander=this.headingDiv.appendChild(document.createElement("span"));this.expander.className="expander unselectable greyedout";this.expander.unselectable=true;var expanderText=this.group.expanded?"-":"+";this.expanderTextNode=this.expander.appendChild(document.createTextNode(expanderText));this.headingDiv.appendChild(document.createTextNode(" "+this.group.name));this.contentDiv=this.mainDiv.appendChild(document.createElement("div"));var contentCssClass=this.group.expanded?"expanded":"collapsed";this.contentDiv.className="groupcontent "+contentCssClass;this.expander.onclick=function(){if(groupElementContainer.group.expandable){groupElementContainer.group.toggleExpanded();}};}}','GroupElementContainer.prototype=new LogItemContainerElement();copyProperties(GroupElementContainer.prototype,{toggleExpanded:function(){if(!this.isRoot){var oldCssClass,newCssClass,expanderText;if(this.group.expanded){newCssClass="expanded";oldCssClass="collapsed";expanderText="-";}else{newCssClass="collapsed";oldCssClass="expanded";expanderText="+";}',"replaceClass(this.contentDiv,newCssClass,oldCssClass);this.expanderTextNode.nodeValue=expanderText;}},remove:function(){if(!this.isRoot){this.headingDiv=null;this.expander.onclick=null;this.expander=null;this.expanderTextNode=null;this.contentDiv=null;this.containerDomNode=null;this.mainDiv.parentNode.removeChild(this.mainDiv);this.mainDiv=null;}},reverseChildren:function(){var node=null;var childDomNodes=[];while((node=this.contentDiv.firstChild)){this.contentDiv.removeChild(node);childDomNodes.push(node);}",'while((node=childDomNodes.pop())){this.contentDiv.appendChild(node);}},update:function(){if(!this.isRoot){if(this.group.expandable){removeClass(this.expander,"greyedout");}else{addClass(this.expander,"greyedout");}}},clear:function(){if(this.isRoot){this.contentDiv.innerHTML="";}}});function Group(name,isRoot,initiallyExpanded){this.name=name;this.group=null;this.isRoot=isRoot;this.initiallyExpanded=initiallyExpanded;this.elementContainers=[];this.children=[];this.expanded=initiallyExpanded;this.rendered=false;this.expandable=false;}',"Group.prototype=new LogItem();copyProperties(Group.prototype,{addChild:function(logItem){this.children.push(logItem);logItem.group=this;},render:function(){if(isIe){var unwrappedDomContainer,wrappedDomContainer;if(this.isRoot){unwrappedDomContainer=logMainContainer;wrappedDomContainer=logMainContainer;}else{unwrappedDomContainer=this.getUnwrappedDomContainer();wrappedDomContainer=this.getWrappedDomContainer();}","this.unwrappedElementContainer=new GroupElementContainer(this,unwrappedDomContainer,this.isRoot,false);this.wrappedElementContainer=new GroupElementContainer(this,wrappedDomContainer,this.isRoot,true);this.elementContainers=[this.unwrappedElementContainer,this.wrappedElementContainer];}else{var mainDomContainer=this.isRoot?logMainContainer:this.getMainDomContainer();this.mainElementContainer=new GroupElementContainer(this,mainDomContainer,this.isRoot,false);this.elementContainers=[this.mainElementContainer];}","this.rendered=true;},toggleExpanded:function(){this.expanded=!this.expanded;for(var i=0,len=this.elementContainers.length;i<len;i++){this.elementContainers[i].toggleExpanded();}},expand:function(){if(!this.expanded){this.toggleExpanded();}},accept:function(visitor){visitor.visitGroup(this);},reverseChildren:function(){if(this.rendered){for(var i=0,len=this.elementContainers.length;i<len;i++){this.elementContainers[i].reverseChildren();}}},update:function(){var previouslyExpandable=this.expandable;this.expandable=(this.children.length!==0);if(this.expandable!==previouslyExpandable){for(var i=0,len=this.elementContainers.length;i<len;i++){this.elementContainers[i].update();}}},flatten:function(){var visitor=new GroupFlattener();this.accept(visitor);return visitor.logEntriesAndSeparators;},removeChild:function(child,doUpdate){array_remove(this.children,child);child.group=null;if(doUpdate){this.update();}},remove:function(doUpdate,removeFromGroup){for(var i=0,len=this.children.length;i<len;i++){this.children[i].remove(false,false);}","this.children=[];this.update();if(this===currentGroup){currentGroup=this.group;}","this.doRemove(doUpdate,removeFromGroup);},serialize:function(items){items.push([LogItem.serializedItemKeys.GROUP_START,this.name]);for(var i=0,len=this.children.length;i<len;i++){this.children[i].serialize(items);}","if(this!==currentGroup){items.push([LogItem.serializedItemKeys.GROUP_END]);}},clear:function(){for(var i=0,len=this.elementContainers.length;i<len;i++){this.elementContainers[i].clear();}}});function LogEntryElementContainer(){}",'LogEntryElementContainer.prototype=new LogItemContainerElement();copyProperties(LogEntryElementContainer.prototype,{remove:function(){this.doRemove();},doRemove:function(){this.mainDiv.parentNode.removeChild(this.mainDiv);this.mainDiv=null;this.contentElement=null;this.containerDomNode=null;},setContent:function(content,wrappedContent){if(content===this.formattedMessage){this.contentElement.innerHTML="";this.contentElement.appendChild(document.createTextNode(this.formattedMessage));}else{this.contentElement.innerHTML=content;}},setSearchMatch:function(isMatch){var oldCssClass=isMatch?"searchnonmatch":"searchmatch";var newCssClass=isMatch?"searchmatch":"searchnonmatch";replaceClass(this.mainDiv,newCssClass,oldCssClass);},clearSearch:function(){removeClass(this.mainDiv,"searchmatch");removeClass(this.mainDiv,"searchnonmatch");}});function LogEntryWrappedElementContainer(logEntry,containerDomNode){this.logEntry=logEntry;this.containerDomNode=containerDomNode;this.mainDiv=document.createElement("div");this.mainDiv.appendChild(document.createTextNode(this.logEntry.formattedMessage));this.mainDiv.className="logentry wrapped "+this.logEntry.level;this.contentElement=this.mainDiv;}','LogEntryWrappedElementContainer.prototype=new LogEntryElementContainer();LogEntryWrappedElementContainer.prototype.setContent=function(content,wrappedContent){if(content===this.formattedMessage){this.contentElement.innerHTML="";this.contentElement.appendChild(document.createTextNode(this.formattedMessage));}else{this.contentElement.innerHTML=wrappedContent;}};function LogEntryUnwrappedElementContainer(logEntry,containerDomNode){this.logEntry=logEntry;this.containerDomNode=containerDomNode;this.mainDiv=document.createElement("div");this.mainDiv.className="logentry unwrapped "+this.logEntry.level;this.pre=this.mainDiv.appendChild(document.createElement("pre"));this.pre.appendChild(document.createTextNode(this.logEntry.formattedMessage));this.pre.className="unwrapped";this.contentElement=this.pre;}','LogEntryUnwrappedElementContainer.prototype=new LogEntryElementContainer();LogEntryUnwrappedElementContainer.prototype.remove=function(){this.doRemove();this.pre=null;};function LogEntryMainElementContainer(logEntry,containerDomNode){this.logEntry=logEntry;this.containerDomNode=containerDomNode;this.mainDiv=document.createElement("div");this.mainDiv.className="logentry nonielogentry "+this.logEntry.level;this.contentElement=this.mainDiv.appendChild(document.createElement("span"));this.contentElement.appendChild(document.createTextNode(this.logEntry.formattedMessage));}',"LogEntryMainElementContainer.prototype=new LogEntryElementContainer();function LogEntry(level,formattedMessage){this.level=level;this.formattedMessage=formattedMessage;this.rendered=false;}",'LogEntry.prototype=new LogItem();copyProperties(LogEntry.prototype,{render:function(){var logEntry=this;var containerDomNode=this.group.contentDiv;if(isIe){this.formattedMessage=this.formattedMessage.replace(/\\r\\n/g,"\\r");this.unwrappedElementContainer=new LogEntryUnwrappedElementContainer(this,this.getUnwrappedDomContainer());this.wrappedElementContainer=new LogEntryWrappedElementContainer(this,this.getWrappedDomContainer());this.elementContainers=[this.unwrappedElementContainer,this.wrappedElementContainer];}else{this.mainElementContainer=new LogEntryMainElementContainer(this,this.getMainDomContainer());this.elementContainers=[this.mainElementContainer];}','this.content=this.formattedMessage;this.rendered=true;},setContent:function(content,wrappedContent){if(content!=this.content){if(isIe&&(content!==this.formattedMessage)){content=content.replace(/\\r\\n/g,"\\r");}',"for(var i=0,len=this.elementContainers.length;i<len;i++){this.elementContainers[i].setContent(content,wrappedContent);}",'this.content=content;}},getSearchMatches:function(){var matches=[];var i,len;if(isIe){var unwrappedEls=getElementsByClass(this.unwrappedElementContainer.mainDiv,"searchterm","span");var wrappedEls=getElementsByClass(this.wrappedElementContainer.mainDiv,"searchterm","span");for(i=0,len=unwrappedEls.length;i<len;i++){matches[i]=new Match(this.level,null,unwrappedEls[i],wrappedEls[i]);}}else{var els=getElementsByClass(this.mainElementContainer.mainDiv,"searchterm","span");for(i=0,len=els.length;i<len;i++){matches[i]=new Match(this.level,els[i]);}}',"return matches;},setSearchMatch:function(isMatch){for(var i=0,len=this.elementContainers.length;i<len;i++){this.elementContainers[i].setSearchMatch(isMatch);}},clearSearch:function(){for(var i=0,len=this.elementContainers.length;i<len;i++){this.elementContainers[i].clearSearch();}},accept:function(visitor){visitor.visitLogEntry(this);},serialize:function(items){items.push([LogItem.serializedItemKeys.LOG_ENTRY,this.level,this.formattedMessage]);}});function LogItemVisitor(){}","LogItemVisitor.prototype={visit:function(logItem){},visitParent:function(logItem){if(logItem.group){logItem.group.accept(this);}},visitChildren:function(logItem){for(var i=0,len=logItem.children.length;i<len;i++){logItem.children[i].accept(this);}},visitLogEntry:function(logEntry){this.visit(logEntry);},visitSeparator:function(separator){this.visit(separator);},visitGroup:function(group){this.visit(group);}};function GroupFlattener(){this.logEntriesAndSeparators=[];}",'GroupFlattener.prototype=new LogItemVisitor();GroupFlattener.prototype.visitGroup=function(group){this.visitChildren(group);};GroupFlattener.prototype.visitLogEntry=function(logEntry){this.logEntriesAndSeparators.push(logEntry);};GroupFlattener.prototype.visitSeparator=function(separator){this.logEntriesAndSeparators.push(separator);};window.onload=function(){if(location.search){var queryBits=unescape(location.search).substr(1).split("&"),nameValueBits;for(var i=0,len=queryBits.length;i<len;i++){nameValueBits=queryBits[i].split("=");if(nameValueBits[0]=="log4javascript_domain"){document.domain=nameValueBits[1];break;}}}','logMainContainer=$("log");if(isIePre7){addClass(logMainContainer,"oldIe");}','rootGroup=new Group("root",true);rootGroup.render();currentGroup=rootGroup;setCommandInputWidth();setLogContainerHeight();toggleLoggingEnabled();toggleSearchEnabled();toggleSearchFilter();toggleSearchHighlight();applyFilters();checkAllLevels();toggleWrap();toggleNewestAtTop();toggleScrollToLatest();renderQueuedLogItems();loaded=true;$("command").value="";$("command").autocomplete="off";$("command").onkeydown=function(evt){evt=getEvent(evt);if(evt.keyCode==10||evt.keyCode==13){evalCommandLine();stopPropagation(evt);}else if(evt.keyCode==27){this.value="";this.focus();}else if(evt.keyCode==38&&commandHistory.length>0){currentCommandIndex=Math.max(0,currentCommandIndex-1);this.value=commandHistory[currentCommandIndex];moveCaretToEnd(this);}else if(evt.keyCode==40&&commandHistory.length>0){currentCommandIndex=Math.min(commandHistory.length-1,currentCommandIndex+1);this.value=commandHistory[currentCommandIndex];moveCaretToEnd(this);}};$("command").onkeypress=function(evt){evt=getEvent(evt);if(evt.keyCode==38&&commandHistory.length>0&&evt.preventDefault){evt.preventDefault();}};$("command").onkeyup=function(evt){evt=getEvent(evt);if(evt.keyCode==27&&evt.preventDefault){evt.preventDefault();this.focus();}};document.onkeydown=function keyEventHandler(evt){evt=getEvent(evt);switch(evt.keyCode){case 69:if(evt.shiftKey&&(evt.ctrlKey||evt.metaKey)){evalLastCommand();cancelKeyEvent(evt);return false;}',"break;case 75:if(evt.shiftKey&&(evt.ctrlKey||evt.metaKey)){focusSearch();cancelKeyEvent(evt);return false;}","break;case 40:case 76:if(evt.shiftKey&&(evt.ctrlKey||evt.metaKey)){focusCommandLine();cancelKeyEvent(evt);return false;}","break;}};setTimeout(setLogContainerHeight,20);setShowCommandLine(showCommandLine);doSearch();};window.onunload=function(){if(mainWindowExists()){appender.unload();}",'appender=null;};function toggleLoggingEnabled(){setLoggingEnabled($("enableLogging").checked);}',"function setLoggingEnabled(enable){loggingEnabled=enable;}","var appender=null;function setAppender(appenderParam){appender=appenderParam;}",'function setShowCloseButton(showCloseButton){$("closeButton").style.display=showCloseButton?"inline":"none";}','function setShowHideButton(showHideButton){$("hideButton").style.display=showHideButton?"inline":"none";}',"var newestAtTop=false;function LogItemContentReverser(){}","LogItemContentReverser.prototype=new LogItemVisitor();LogItemContentReverser.prototype.visitGroup=function(group){group.reverseChildren();this.visitChildren(group);};function setNewestAtTop(isNewestAtTop){var oldNewestAtTop=newestAtTop;var i,iLen,j,jLen;newestAtTop=Boolean(isNewestAtTop);if(oldNewestAtTop!=newestAtTop){var visitor=new LogItemContentReverser();rootGroup.accept(visitor);if(currentSearch){var currentMatch=currentSearch.matches[currentMatchIndex];var matchIndex=0;var matches=[];var actOnLogEntry=function(logEntry){var logEntryMatches=logEntry.getSearchMatches();for(j=0,jLen=logEntryMatches.length;j<jLen;j++){matches[matchIndex]=logEntryMatches[j];if(currentMatch&&logEntryMatches[j].equals(currentMatch)){currentMatchIndex=matchIndex;}","matchIndex++;}};if(newestAtTop){for(i=logEntries.length-1;i>=0;i--){actOnLogEntry(logEntries[i]);}}else{for(i=0,iLen=logEntries.length;i<iLen;i++){actOnLogEntry(logEntries[i]);}}","currentSearch.matches=matches;if(currentMatch){currentMatch.setCurrent();}}else if(scrollToLatest){doScrollToLatest();}}",'$("newestAtTop").checked=isNewestAtTop;}','function toggleNewestAtTop(){var isNewestAtTop=$("newestAtTop").checked;setNewestAtTop(isNewestAtTop);}',"var scrollToLatest=true;function setScrollToLatest(isScrollToLatest){scrollToLatest=isScrollToLatest;if(scrollToLatest){doScrollToLatest();}",'$("scrollToLatest").checked=isScrollToLatest;}','function toggleScrollToLatest(){var isScrollToLatest=$("scrollToLatest").checked;setScrollToLatest(isScrollToLatest);}','function doScrollToLatest(){var l=logMainContainer;if(typeof l.scrollTop!="undefined"){if(newestAtTop){l.scrollTop=0;}else{var latestLogEntry=l.lastChild;if(latestLogEntry){l.scrollTop=l.scrollHeight;}}}}',"var closeIfOpenerCloses=true;function setCloseIfOpenerCloses(isCloseIfOpenerCloses){closeIfOpenerCloses=isCloseIfOpenerCloses;}","var maxMessages=null;function setMaxMessages(max){maxMessages=max;pruneLogEntries();}",'var showCommandLine=false;function setShowCommandLine(isShowCommandLine){showCommandLine=isShowCommandLine;if(loaded){$("commandLine").style.display=showCommandLine?"block":"none";setCommandInputWidth();setLogContainerHeight();}}','function focusCommandLine(){if(loaded){$("command").focus();}}','function focusSearch(){if(loaded){$("searchBox").focus();}}',"function getLogItems(){var items=[];for(var i=0,len=logItems.length;i<len;i++){logItems[i].serialize(items);}","return items;}","function setLogItems(items){var loggingReallyEnabled=loggingEnabled;loggingEnabled=true;for(var i=0,len=items.length;i<len;i++){switch(items[i][0]){case LogItem.serializedItemKeys.LOG_ENTRY:log(items[i][1],items[i][2]);break;case LogItem.serializedItemKeys.GROUP_START:group(items[i][1]);break;case LogItem.serializedItemKeys.GROUP_END:groupEnd();break;}}","loggingEnabled=loggingReallyEnabled;}","function log(logLevel,formattedMessage){if(loggingEnabled){var logEntry=new LogEntry(logLevel,formattedMessage);logEntries.push(logEntry);logEntriesAndSeparators.push(logEntry);logItems.push(logEntry);currentGroup.addChild(logEntry);if(loaded){if(logQueuedEventsTimer!==null){clearTimeout(logQueuedEventsTimer);}","logQueuedEventsTimer=setTimeout(renderQueuedLogItems,renderDelay);unrenderedLogItemsExist=true;}}}","function renderQueuedLogItems(){logQueuedEventsTimer=null;var pruned=pruneLogEntries();var initiallyHasMatches=currentSearch?currentSearch.hasMatches():false;for(var i=0,len=logItems.length;i<len;i++){if(!logItems[i].rendered){logItems[i].render();logItems[i].appendToLog();if(currentSearch&&(logItems[i]instanceof LogEntry)){currentSearch.applyTo(logItems[i]);}}}","if(currentSearch){if(pruned){if(currentSearch.hasVisibleMatches()){if(currentMatchIndex===null){setCurrentMatchIndex(0);}","displayMatches();}else{displayNoMatches();}}else if(!initiallyHasMatches&&currentSearch.hasVisibleMatches()){setCurrentMatchIndex(0);displayMatches();}}","if(scrollToLatest){doScrollToLatest();}","unrenderedLogItemsExist=false;}","function pruneLogEntries(){if((maxMessages!==null)&&(logEntriesAndSeparators.length>maxMessages)){var numberToDelete=logEntriesAndSeparators.length-maxMessages;var prunedLogEntries=logEntriesAndSeparators.slice(0,numberToDelete);if(currentSearch){currentSearch.removeMatches(prunedLogEntries);}","var group;for(var i=0;i<numberToDelete;i++){group=logEntriesAndSeparators[i].group;array_remove(logItems,logEntriesAndSeparators[i]);array_remove(logEntries,logEntriesAndSeparators[i]);logEntriesAndSeparators[i].remove(true,true);if(group.children.length===0&&group!==currentGroup&&group!==rootGroup){array_remove(logItems,group);group.remove(true,true);}}","logEntriesAndSeparators=array_removeFromStart(logEntriesAndSeparators,numberToDelete);return true;}","return false;}",'function group(name,startExpanded){if(loggingEnabled){initiallyExpanded=(typeof startExpanded==="undefined")?true:Boolean(startExpanded);var newGroup=new Group(name,false,initiallyExpanded);currentGroup.addChild(newGroup);currentGroup=newGroup;logItems.push(newGroup);if(loaded){if(logQueuedEventsTimer!==null){clearTimeout(logQueuedEventsTimer);}',"logQueuedEventsTimer=setTimeout(renderQueuedLogItems,renderDelay);unrenderedLogItemsExist=true;}}}","function groupEnd(){currentGroup=(currentGroup===rootGroup)?rootGroup:currentGroup.group;}","function mainPageReloaded(){currentGroup=rootGroup;var separator=new Separator();logEntriesAndSeparators.push(separator);logItems.push(separator);currentGroup.addChild(separator);}","function closeWindow(){if(appender&&mainWindowExists()){appender.close(true);}else{window.close();}}","function hide(){if(appender&&mainWindowExists()){appender.hide();}}",'var mainWindow=window;var windowId="log4javascriptConsoleWindow_"+new Date().getTime()+"_"+(""+Math.random()).substr(2);function setMainWindow(win){mainWindow=win;mainWindow[windowId]=window;if(opener&&closeIfOpenerCloses){pollOpener();}}',"function pollOpener(){if(closeIfOpenerCloses){if(mainWindowExists()){setTimeout(pollOpener,500);}else{closeWindow();}}}","function mainWindowExists(){try{return(mainWindow&&!mainWindow.closed&&mainWindow[windowId]==window);}catch(ex){}","return false;}",'var logLevels=["TRACE","DEBUG","INFO","WARN","ERROR","FATAL"];function getCheckBox(logLevel){return $("switch_"+logLevel);}','function getIeWrappedLogContainer(){return $("log_wrapped");}','function getIeUnwrappedLogContainer(){return $("log_unwrapped");}',"function applyFilters(){for(var i=0;i<logLevels.length;i++){if(getCheckBox(logLevels[i]).checked){addClass(logMainContainer,logLevels[i]);}else{removeClass(logMainContainer,logLevels[i]);}}","updateSearchFromFilters();}",'function toggleAllLevels(){var turnOn=$("switch_ALL").checked;for(var i=0;i<logLevels.length;i++){getCheckBox(logLevels[i]).checked=turnOn;if(turnOn){addClass(logMainContainer,logLevels[i]);}else{removeClass(logMainContainer,logLevels[i]);}}}','function checkAllLevels(){for(var i=0;i<logLevels.length;i++){if(!getCheckBox(logLevels[i]).checked){getCheckBox("ALL").checked=false;return;}}','getCheckBox("ALL").checked=true;}',"function clearLog(){rootGroup.clear();currentGroup=rootGroup;logEntries=[];logItems=[];logEntriesAndSeparators=[];doSearch();}",'function toggleWrap(){var enable=$("wrap").checked;if(enable){addClass(logMainContainer,"wrap");}else{removeClass(logMainContainer,"wrap");}',"refreshCurrentMatch();}","var searchTimer=null;function scheduleSearch(){try{clearTimeout(searchTimer);}catch(ex){}","searchTimer=setTimeout(doSearch,500);}","function Search(searchTerm,isRegex,searchRegex,isCaseSensitive){this.searchTerm=searchTerm;this.isRegex=isRegex;this.searchRegex=searchRegex;this.isCaseSensitive=isCaseSensitive;this.matches=[];}","Search.prototype={hasMatches:function(){return this.matches.length>0;},hasVisibleMatches:function(){if(this.hasMatches()){for(var i=0;i<this.matches.length;i++){if(this.matches[i].isVisible()){return true;}}}","return false;},match:function(logEntry){var entryText=String(logEntry.formattedMessage);var matchesSearch=false;if(this.isRegex){matchesSearch=this.searchRegex.test(entryText);}else if(this.isCaseSensitive){matchesSearch=(entryText.indexOf(this.searchTerm)>-1);}else{matchesSearch=(entryText.toLowerCase().indexOf(this.searchTerm.toLowerCase())>-1);}","return matchesSearch;},getNextVisibleMatchIndex:function(){for(var i=currentMatchIndex+1;i<this.matches.length;i++){if(this.matches[i].isVisible()){return i;}}","for(i=0;i<=currentMatchIndex;i++){if(this.matches[i].isVisible()){return i;}}","return-1;},getPreviousVisibleMatchIndex:function(){for(var i=currentMatchIndex-1;i>=0;i--){if(this.matches[i].isVisible()){return i;}}","for(var i=this.matches.length-1;i>=currentMatchIndex;i--){if(this.matches[i].isVisible()){return i;}}",'return-1;},applyTo:function(logEntry){var doesMatch=this.match(logEntry);if(doesMatch){logEntry.group.expand();logEntry.setSearchMatch(true);var logEntryContent;var wrappedLogEntryContent;var searchTermReplacementStartTag="<span class=\\"searchterm\\">";var searchTermReplacementEndTag="<"+"/span>";var preTagName=isIe?"pre":"span";var preStartTag="<"+preTagName+" class=\\"pre\\">";var preEndTag="<"+"/"+preTagName+">";var startIndex=0;var searchIndex,matchedText,textBeforeMatch;if(this.isRegex){var flags=this.isCaseSensitive?"g":"gi";var capturingRegex=new RegExp("("+this.searchRegex.source+")",flags);var rnd=(""+Math.random()).substr(2);var startToken="%%s"+rnd+"%%";var endToken="%%e"+rnd+"%%";logEntryContent=logEntry.formattedMessage.replace(capturingRegex,startToken+"$1"+endToken);logEntryContent=escapeHtml(logEntryContent);var result;var searchString=logEntryContent;logEntryContent="";wrappedLogEntryContent="";while((searchIndex=searchString.indexOf(startToken,startIndex))>-1){var endTokenIndex=searchString.indexOf(endToken,searchIndex);matchedText=searchString.substring(searchIndex+startToken.length,endTokenIndex);textBeforeMatch=searchString.substring(startIndex,searchIndex);logEntryContent+=preStartTag+textBeforeMatch+preEndTag;logEntryContent+=searchTermReplacementStartTag+preStartTag+matchedText+',"preEndTag+searchTermReplacementEndTag;if(isIe){wrappedLogEntryContent+=textBeforeMatch+searchTermReplacementStartTag+","matchedText+searchTermReplacementEndTag;}","startIndex=endTokenIndex+endToken.length;}",'logEntryContent+=preStartTag+searchString.substr(startIndex)+preEndTag;if(isIe){wrappedLogEntryContent+=searchString.substr(startIndex);}}else{logEntryContent="";wrappedLogEntryContent="";var searchTermReplacementLength=searchTermReplacementStartTag.length+',"this.searchTerm.length+searchTermReplacementEndTag.length;var searchTermLength=this.searchTerm.length;var searchTermLowerCase=this.searchTerm.toLowerCase();var logTextLowerCase=logEntry.formattedMessage.toLowerCase();while((searchIndex=logTextLowerCase.indexOf(searchTermLowerCase,startIndex))>-1){matchedText=escapeHtml(logEntry.formattedMessage.substr(searchIndex,this.searchTerm.length));textBeforeMatch=escapeHtml(logEntry.formattedMessage.substring(startIndex,searchIndex));var searchTermReplacement=searchTermReplacementStartTag+","preStartTag+matchedText+preEndTag+searchTermReplacementEndTag;logEntryContent+=preStartTag+textBeforeMatch+preEndTag+searchTermReplacement;if(isIe){wrappedLogEntryContent+=textBeforeMatch+searchTermReplacementStartTag+","matchedText+searchTermReplacementEndTag;}","startIndex=searchIndex+searchTermLength;}","var textAfterLastMatch=escapeHtml(logEntry.formattedMessage.substr(startIndex));logEntryContent+=preStartTag+textAfterLastMatch+preEndTag;if(isIe){wrappedLogEntryContent+=textAfterLastMatch;}}","logEntry.setContent(logEntryContent,wrappedLogEntryContent);var logEntryMatches=logEntry.getSearchMatches();this.matches=this.matches.concat(logEntryMatches);}else{logEntry.setSearchMatch(false);logEntry.setContent(logEntry.formattedMessage,logEntry.formattedMessage);}","return doesMatch;},removeMatches:function(logEntries){var matchesToRemoveCount=0;var currentMatchRemoved=false;var matchesToRemove=[];var i,iLen,j,jLen;for(i=0,iLen=this.matches.length;i<iLen;i++){for(j=0,jLen=logEntries.length;j<jLen;j++){if(this.matches[i].belongsTo(logEntries[j])){matchesToRemove.push(this.matches[i]);if(i===currentMatchIndex){currentMatchRemoved=true;}}}}","var newMatch=currentMatchRemoved?null:this.matches[currentMatchIndex];if(currentMatchRemoved){for(i=currentMatchIndex,iLen=this.matches.length;i<iLen;i++){if(this.matches[i].isVisible()&&!array_contains(matchesToRemove,this.matches[i])){newMatch=this.matches[i];break;}}}","for(i=0,iLen=matchesToRemove.length;i<iLen;i++){array_remove(this.matches,matchesToRemove[i]);matchesToRemove[i].remove();}","if(this.hasVisibleMatches()){if(newMatch===null){setCurrentMatchIndex(0);}else{var newMatchIndex=0;for(i=0,iLen=this.matches.length;i<iLen;i++){if(newMatch===this.matches[i]){newMatchIndex=i;break;}}","setCurrentMatchIndex(newMatchIndex);}}else{currentMatchIndex=null;displayNoMatches();}}};function getPageOffsetTop(el,container){var currentEl=el;var y=0;while(currentEl&&currentEl!=container){y+=currentEl.offsetTop;currentEl=currentEl.offsetParent;}","return y;}",'function scrollIntoView(el){var logContainer=logMainContainer;if(!$("wrap").checked){var logContainerLeft=logContainer.scrollLeft;var logContainerRight=logContainerLeft+logContainer.offsetWidth;var elLeft=el.offsetLeft;var elRight=elLeft+el.offsetWidth;if(elLeft<logContainerLeft||elRight>logContainerRight){logContainer.scrollLeft=elLeft-(logContainer.offsetWidth-el.offsetWidth)/2;}}',"var logContainerTop=logContainer.scrollTop;var logContainerBottom=logContainerTop+logContainer.offsetHeight;var elTop=getPageOffsetTop(el)-getToolBarsHeight();var elBottom=elTop+el.offsetHeight;if(elTop<logContainerTop||elBottom>logContainerBottom){logContainer.scrollTop=elTop-(logContainer.offsetHeight-el.offsetHeight)/2;}}","function Match(logEntryLevel,spanInMainDiv,spanInUnwrappedPre,spanInWrappedDiv){this.logEntryLevel=logEntryLevel;this.spanInMainDiv=spanInMainDiv;if(isIe){this.spanInUnwrappedPre=spanInUnwrappedPre;this.spanInWrappedDiv=spanInWrappedDiv;}","this.mainSpan=isIe?spanInUnwrappedPre:spanInMainDiv;}",'Match.prototype={equals:function(match){return this.mainSpan===match.mainSpan;},setCurrent:function(){if(isIe){addClass(this.spanInUnwrappedPre,"currentmatch");addClass(this.spanInWrappedDiv,"currentmatch");var elementToScroll=$("wrap").checked?this.spanInWrappedDiv:this.spanInUnwrappedPre;scrollIntoView(elementToScroll);}else{addClass(this.spanInMainDiv,"currentmatch");scrollIntoView(this.spanInMainDiv);}},belongsTo:function(logEntry){if(isIe){return isDescendant(this.spanInUnwrappedPre,logEntry.unwrappedPre);}else{return isDescendant(this.spanInMainDiv,logEntry.mainDiv);}},setNotCurrent:function(){if(isIe){removeClass(this.spanInUnwrappedPre,"currentmatch");removeClass(this.spanInWrappedDiv,"currentmatch");}else{removeClass(this.spanInMainDiv,"currentmatch");}},isOrphan:function(){return isOrphan(this.mainSpan);},isVisible:function(){return getCheckBox(this.logEntryLevel).checked;},remove:function(){if(isIe){this.spanInUnwrappedPre=null;this.spanInWrappedDiv=null;}else{this.spanInMainDiv=null;}}};var currentSearch=null;var currentMatchIndex=null;function doSearch(){var searchBox=$("searchBox");var searchTerm=searchBox.value;var isRegex=$("searchRegex").checked;var isCaseSensitive=$("searchCaseSensitive").checked;var i;if(searchTerm===""){$("searchReset").disabled=true;$("searchNav").style.display="none";removeClass(document.body,"searching");removeClass(searchBox,"hasmatches");removeClass(searchBox,"nomatches");for(i=0;i<logEntries.length;i++){logEntries[i].clearSearch();logEntries[i].setContent(logEntries[i].formattedMessage,logEntries[i].formattedMessage);}','currentSearch=null;setLogContainerHeight();}else{$("searchReset").disabled=false;$("searchNav").style.display="block";var searchRegex;var regexValid;if(isRegex){try{searchRegex=isCaseSensitive?new RegExp(searchTerm,"g"):new RegExp(searchTerm,"gi");regexValid=true;replaceClass(searchBox,"validregex","invalidregex");searchBox.title="Valid regex";}catch(ex){regexValid=false;replaceClass(searchBox,"invalidregex","validregex");searchBox.title="Invalid regex: "+(ex.message?ex.message:(ex.description?ex.description:"unknown error"));return;}}else{searchBox.title="";removeClass(searchBox,"validregex");removeClass(searchBox,"invalidregex");}','addClass(document.body,"searching");currentSearch=new Search(searchTerm,isRegex,searchRegex,isCaseSensitive);for(i=0;i<logEntries.length;i++){currentSearch.applyTo(logEntries[i]);}',"setLogContainerHeight();if(currentSearch.hasVisibleMatches()){setCurrentMatchIndex(0);displayMatches();}else{displayNoMatches();}}}","function updateSearchFromFilters(){if(currentSearch){if(currentSearch.hasMatches()){if(currentMatchIndex===null){currentMatchIndex=0;}","var currentMatch=currentSearch.matches[currentMatchIndex];if(currentMatch.isVisible()){displayMatches();setCurrentMatchIndex(currentMatchIndex);}else{currentMatch.setNotCurrent();var nextVisibleMatchIndex=currentSearch.getNextVisibleMatchIndex();if(nextVisibleMatchIndex>-1){setCurrentMatchIndex(nextVisibleMatchIndex);displayMatches();}else{displayNoMatches();}}}else{displayNoMatches();}}}","function refreshCurrentMatch(){if(currentSearch&&currentSearch.hasVisibleMatches()){setCurrentMatchIndex(currentMatchIndex);}}",'function displayMatches(){replaceClass($("searchBox"),"hasmatches","nomatches");$("searchBox").title=""+currentSearch.matches.length+" matches found";$("searchNav").style.display="block";setLogContainerHeight();}','function displayNoMatches(){replaceClass($("searchBox"),"nomatches","hasmatches");$("searchBox").title="No matches found";$("searchNav").style.display="none";setLogContainerHeight();}','function toggleSearchEnabled(enable){enable=(typeof enable=="undefined")?!$("searchDisable").checked:enable;$("searchBox").disabled=!enable;$("searchReset").disabled=!enable;$("searchRegex").disabled=!enable;$("searchNext").disabled=!enable;$("searchPrevious").disabled=!enable;$("searchCaseSensitive").disabled=!enable;$("searchNav").style.display=(enable&&($("searchBox").value!=="")&&currentSearch&&currentSearch.hasVisibleMatches())?"block":"none";if(enable){removeClass($("search"),"greyedout");addClass(document.body,"searching");if($("searchHighlight").checked){addClass(logMainContainer,"searchhighlight");}else{removeClass(logMainContainer,"searchhighlight");}','if($("searchFilter").checked){addClass(logMainContainer,"searchfilter");}else{removeClass(logMainContainer,"searchfilter");}','$("searchDisable").checked=!enable;}else{addClass($("search"),"greyedout");removeClass(document.body,"searching");removeClass(logMainContainer,"searchhighlight");removeClass(logMainContainer,"searchfilter");}',"setLogContainerHeight();}",'function toggleSearchFilter(){var enable=$("searchFilter").checked;if(enable){addClass(logMainContainer,"searchfilter");}else{removeClass(logMainContainer,"searchfilter");}',"refreshCurrentMatch();}",'function toggleSearchHighlight(){var enable=$("searchHighlight").checked;if(enable){addClass(logMainContainer,"searchhighlight");}else{removeClass(logMainContainer,"searchhighlight");}}','function clearSearch(){$("searchBox").value="";doSearch();}','function searchNext(){if(currentSearch!==null&&currentMatchIndex!==null){currentSearch.matches[currentMatchIndex].setNotCurrent();var nextMatchIndex=currentSearch.getNextVisibleMatchIndex();if(nextMatchIndex>currentMatchIndex||confirm("Reached the end of the page. Start from the top?")){setCurrentMatchIndex(nextMatchIndex);}}}','function searchPrevious(){if(currentSearch!==null&&currentMatchIndex!==null){currentSearch.matches[currentMatchIndex].setNotCurrent();var previousMatchIndex=currentSearch.getPreviousVisibleMatchIndex();if(previousMatchIndex<currentMatchIndex||confirm("Reached the start of the page. Continue from the bottom?")){setCurrentMatchIndex(previousMatchIndex);}}}',"function setCurrentMatchIndex(index){currentMatchIndex=index;currentSearch.matches[currentMatchIndex].setCurrent();}",'function addClass(el,cssClass){if(!hasClass(el,cssClass)){if(el.className){el.className+=" "+cssClass;}else{el.className=cssClass;}}}','function hasClass(el,cssClass){if(el.className){var classNames=el.className.split(" ");return array_contains(classNames,cssClass);}',"return false;}",'function removeClass(el,cssClass){if(hasClass(el,cssClass)){var existingClasses=el.className.split(" ");var newClasses=[];for(var i=0,len=existingClasses.length;i<len;i++){if(existingClasses[i]!=cssClass){newClasses[newClasses.length]=existingClasses[i];}}','el.className=newClasses.join(" ");}}',"function replaceClass(el,newCssClass,oldCssClass){removeClass(el,oldCssClass);addClass(el,newCssClass);}","function getElementsByClass(el,cssClass,tagName){var elements=el.getElementsByTagName(tagName);var matches=[];for(var i=0,len=elements.length;i<len;i++){if(hasClass(elements[i],cssClass)){matches.push(elements[i]);}}","return matches;}","function $(id){return document.getElementById(id);}","function isDescendant(node,ancestorNode){while(node!=null){if(node===ancestorNode){return true;}","node=node.parentNode;}","return false;}","function isOrphan(node){var currentNode=node;while(currentNode){if(currentNode==document.body){return false;}","currentNode=currentNode.parentNode;}","return true;}",'function escapeHtml(str){return str.replace(/&/g,"&amp;").replace(/[<]/g,"&lt;").replace(/>/g,"&gt;");}',"function getWindowWidth(){if(window.innerWidth){return window.innerWidth;}else if(document.documentElement&&document.documentElement.clientWidth){return document.documentElement.clientWidth;}else if(document.body){return document.body.clientWidth;}","return 0;}","function getWindowHeight(){if(window.innerHeight){return window.innerHeight;}else if(document.documentElement&&document.documentElement.clientHeight){return document.documentElement.clientHeight;}else if(document.body){return document.body.clientHeight;}","return 0;}",'function getToolBarsHeight(){return $("switches").offsetHeight;}','function getChromeHeight(){var height=getToolBarsHeight();if(showCommandLine){height+=$("commandLine").offsetHeight;}',"return height;}",'function setLogContainerHeight(){if(logMainContainer){var windowHeight=getWindowHeight();$("body").style.height=getWindowHeight()+"px";logMainContainer.style.height=""+','Math.max(0,windowHeight-getChromeHeight())+"px";}}','function setCommandInputWidth(){if(showCommandLine){$("command").style.width=""+Math.max(0,$("commandLineContainer").offsetWidth-','($("evaluateButton").offsetWidth+13))+"px";}}',"window.onresize=function(){setCommandInputWidth();setLogContainerHeight();};if(!Array.prototype.push){Array.prototype.push=function(){for(var i=0,len=arguments.length;i<len;i++){this[this.length]=arguments[i];}","return this.length;};}","if(!Array.prototype.pop){Array.prototype.pop=function(){if(this.length>0){var val=this[this.length-1];this.length=this.length-1;return val;}};}","if(!Array.prototype.shift){Array.prototype.shift=function(){if(this.length>0){var firstItem=this[0];for(var i=0,len=this.length-1;i<len;i++){this[i]=this[i+1];}","this.length=this.length-1;return firstItem;}};}","if(!Array.prototype.splice){Array.prototype.splice=function(startIndex,deleteCount){var itemsAfterDeleted=this.slice(startIndex+deleteCount);var itemsDeleted=this.slice(startIndex,startIndex+deleteCount);this.length=startIndex;var argumentsArray=[];for(var i=0,len=arguments.length;i<len;i++){argumentsArray[i]=arguments[i];}","var itemsToAppend=(argumentsArray.length>2)?itemsAfterDeleted=argumentsArray.slice(2).concat(itemsAfterDeleted):itemsAfterDeleted;for(i=0,len=itemsToAppend.length;i<len;i++){this.push(itemsToAppend[i]);}","return itemsDeleted;};}","function array_remove(arr,val){var index=-1;for(var i=0,len=arr.length;i<len;i++){if(arr[i]===val){index=i;break;}}","if(index>=0){arr.splice(index,1);return index;}else{return false;}}","function array_removeFromStart(array,numberToRemove){if(Array.prototype.splice){array.splice(0,numberToRemove);}else{for(var i=numberToRemove,len=array.length;i<len;i++){array[i-numberToRemove]=array[i];}","array.length=array.length-numberToRemove;}","return array;}","function array_contains(arr,val){for(var i=0,len=arr.length;i<len;i++){if(arr[i]==val){return true;}}","return false;}","function getErrorMessage(ex){if(ex.message){return ex.message;}else if(ex.description){return ex.description;}",'return""+ex;}',"function moveCaretToEnd(input){if(input.setSelectionRange){input.focus();var length=input.value.length;input.setSelectionRange(length,length);}else if(input.createTextRange){var range=input.createTextRange();range.collapse(false);range.select();}","input.focus();}",'function stopPropagation(evt){if(evt.stopPropagation){evt.stopPropagation();}else if(typeof evt.cancelBubble!="undefined"){evt.cancelBubble=true;}}',"function getEvent(evt){return evt?evt:event;}","function getTarget(evt){return evt.target?evt.target:evt.srcElement;}",'function getRelatedTarget(evt){if(evt.relatedTarget){return evt.relatedTarget;}else if(evt.srcElement){switch(evt.type){case"mouseover":return evt.fromElement;case"mouseout":return evt.toElement;default:return evt.srcElement;}}}',"function cancelKeyEvent(evt){evt.returnValue=false;stopPropagation(evt);}",'function evalCommandLine(){var expr=$("command").value;evalCommand(expr);$("command").value="";}',"function evalLastCommand(){if(lastCommand!=null){evalCommand(lastCommand);}}",'var lastCommand=null;var commandHistory=[];var currentCommandIndex=0;function evalCommand(expr){if(appender){appender.evalCommandAndAppend(expr);}else{var prefix=">>> "+expr+"\\r\\n";try{log("INFO",prefix+eval(expr));}catch(ex){log("ERROR",prefix+"Error: "+getErrorMessage(ex));}}',"if(expr!=commandHistory[commandHistory.length-1]){commandHistory.push(expr);if(appender){appender.storeCommandHistory(commandHistory);}}","currentCommandIndex=(expr==commandHistory[currentCommandIndex])?currentCommandIndex+1:commandHistory.length;lastCommand=expr;}","//]]>","<\/script>",'<style type="text/css">',"body{background-color:white;color:black;padding:0;margin:0;font-family:tahoma,verdana,arial,helvetica,sans-serif;overflow:hidden}div#switchesContainer input{margin-bottom:0}div.toolbar{border-top:solid #ffffff 1px;border-bottom:solid #aca899 1px;background-color:#f1efe7;padding:3px 5px;font-size:68.75%}div.toolbar,div#search input{font-family:tahoma,verdana,arial,helvetica,sans-serif}div.toolbar input.button{padding:0 5px;font-size:100%}div.toolbar input.hidden{display:none}div#switches input#clearButton{margin-left:20px}div#levels label{font-weight:bold}div#levels label,div#options label{margin-right:5px}div#levels label#wrapLabel{font-weight:normal}div#search label{margin-right:10px}div#search label.searchboxlabel{margin-right:0}div#search input{font-size:100%}div#search input.validregex{color:green}div#search input.invalidregex{color:red}div#search input.nomatches{color:white;background-color:#ff6666}div#search input.nomatches{color:white;background-color:#ff6666}div#searchNav{display:none}div#commandLine{display:none}div#commandLine input#command{font-size:100%;font-family:Courier New,Courier}div#commandLine input#evaluateButton{}*.greyedout{color:gray !important;border-color:gray !important}*.greyedout *.alwaysenabled{color:black}*.unselectable{-khtml-user-select:none;-moz-user-select:none;user-select:none}div#log{font-family:Courier New,Courier;font-size:75%;width:100%;overflow:auto;clear:both;position:relative}div.group{border-color:#cccccc;border-style:solid;border-width:1px 0 1px 1px;overflow:visible}div.oldIe div.group,div.oldIe div.group *,div.oldIe *.logentry{height:1%}div.group div.groupheading span.expander{border:solid black 1px;font-family:Courier New,Courier;font-size:0.833em;background-color:#eeeeee;position:relative;top:-1px;color:black;padding:0 2px;cursor:pointer;cursor:hand;height:1%}div.group div.groupcontent{margin-left:10px;padding-bottom:2px;overflow:visible}div.group div.expanded{display:block}div.group div.collapsed{display:none}*.logentry{overflow:visible;display:none;white-space:pre}span.pre{white-space:pre}pre.unwrapped{display:inline !important}pre.unwrapped pre.pre,div.wrapped pre.pre{display:inline}div.wrapped pre.pre{white-space:normal}div.wrapped{display:none}body.searching *.logentry span.currentmatch{color:white !important;background-color:green !important}body.searching div.searchhighlight *.logentry span.searchterm{color:black;background-color:yellow}div.wrap *.logentry{white-space:normal !important;border-width:0 0 1px 0;border-color:#dddddd;border-style:dotted}div.wrap #log_wrapped,#log_unwrapped{display:block}div.wrap #log_unwrapped,#log_wrapped{display:none}div.wrap *.logentry span.pre{overflow:visible;white-space:normal}div.wrap *.logentry pre.unwrapped{display:none}div.wrap *.logentry span.wrapped{display:inline}div.searchfilter *.searchnonmatch{display:none !important}div#log *.TRACE,label#label_TRACE{color:#666666}div#log *.DEBUG,label#label_DEBUG{color:green}div#log *.INFO,label#label_INFO{color:#000099}div#log *.WARN,label#label_WARN{color:#999900}div#log *.ERROR,label#label_ERROR{color:red}div#log *.FATAL,label#label_FATAL{color:#660066}div.TRACE#log *.TRACE,div.DEBUG#log *.DEBUG,div.INFO#log *.INFO,div.WARN#log *.WARN,div.ERROR#log *.ERROR,div.FATAL#log *.FATAL{display:block}div#log div.separator{background-color:#cccccc;margin:5px 0;line-height:1px}","</style>","</head>",'<body id="body">','<div id="switchesContainer">','<div id="switches">','<div id="levels" class="toolbar">',"Filters:",'<input type="checkbox" id="switch_TRACE" onclick="applyFilters(); checkAllLevels()" checked="checked" title="Show/hide trace messages" /><label for="switch_TRACE" id="label_TRACE">trace</label>','<input type="checkbox" id="switch_DEBUG" onclick="applyFilters(); checkAllLevels()" checked="checked" title="Show/hide debug messages" /><label for="switch_DEBUG" id="label_DEBUG">debug</label>','<input type="checkbox" id="switch_INFO" onclick="applyFilters(); checkAllLevels()" checked="checked" title="Show/hide info messages" /><label for="switch_INFO" id="label_INFO">info</label>','<input type="checkbox" id="switch_WARN" onclick="applyFilters(); checkAllLevels()" checked="checked" title="Show/hide warn messages" /><label for="switch_WARN" id="label_WARN">warn</label>','<input type="checkbox" id="switch_ERROR" onclick="applyFilters(); checkAllLevels()" checked="checked" title="Show/hide error messages" /><label for="switch_ERROR" id="label_ERROR">error</label>','<input type="checkbox" id="switch_FATAL" onclick="applyFilters(); checkAllLevels()" checked="checked" title="Show/hide fatal messages" /><label for="switch_FATAL" id="label_FATAL">fatal</label>','<input type="checkbox" id="switch_ALL" onclick="toggleAllLevels(); applyFilters()" checked="checked" title="Show/hide all messages" /><label for="switch_ALL" id="label_ALL">all</label>',"</div>",'<div id="search" class="toolbar">','<label for="searchBox" class="searchboxlabel">Search:</label> <input type="text" id="searchBox" onclick="toggleSearchEnabled(true)" onkeyup="scheduleSearch()" size="20" />','<input type="button" id="searchReset" disabled="disabled" value="Reset" onclick="clearSearch()" class="button" title="Reset the search" />','<input type="checkbox" id="searchRegex" onclick="doSearch()" title="If checked, search is treated as a regular expression" /><label for="searchRegex">Regex</label>','<input type="checkbox" id="searchCaseSensitive" onclick="doSearch()" title="If checked, search is case sensitive" /><label for="searchCaseSensitive">Match case</label>','<input type="checkbox" id="searchDisable" onclick="toggleSearchEnabled()" title="Enable/disable search" /><label for="searchDisable" class="alwaysenabled">Disable</label>','<div id="searchNav">','<input type="button" id="searchNext" disabled="disabled" value="Next" onclick="searchNext()" class="button" title="Go to the next matching log entry" />','<input type="button" id="searchPrevious" disabled="disabled" value="Previous" onclick="searchPrevious()" class="button" title="Go to the previous matching log entry" />','<input type="checkbox" id="searchFilter" onclick="toggleSearchFilter()" title="If checked, non-matching log entries are filtered out" /><label for="searchFilter">Filter</label>','<input type="checkbox" id="searchHighlight" onclick="toggleSearchHighlight()" title="Highlight matched search terms" /><label for="searchHighlight" class="alwaysenabled">Highlight all</label>',"</div>","</div>",'<div id="options" class="toolbar">',"Options:",'<input type="checkbox" id="enableLogging" onclick="toggleLoggingEnabled()" checked="checked" title="Enable/disable logging" /><label for="enableLogging" id="enableLoggingLabel">Log</label>','<input type="checkbox" id="wrap" onclick="toggleWrap()" title="Enable / disable word wrap" /><label for="wrap" id="wrapLabel">Wrap</label>','<input type="checkbox" id="newestAtTop" onclick="toggleNewestAtTop()" title="If checked, causes newest messages to appear at the top" /><label for="newestAtTop" id="newestAtTopLabel">Newest at the top</label>','<input type="checkbox" id="scrollToLatest" onclick="toggleScrollToLatest()" checked="checked" title="If checked, window automatically scrolls to a new message when it is added" /><label for="scrollToLatest" id="scrollToLatestLabel">Scroll to latest</label>','<input type="button" id="clearButton" value="Clear" onclick="clearLog()" class="button" title="Clear all log messages"  />','<input type="button" id="hideButton" value="Hide" onclick="hide()" class="hidden button" title="Hide the console" />','<input type="button" id="closeButton" value="Close" onclick="closeWindow()" class="hidden button" title="Close the window" />',"</div>","</div>","</div>",'<div id="log" class="TRACE DEBUG INFO WARN ERROR FATAL"></div>','<div id="commandLine" class="toolbar">','<div id="commandLineContainer">','<input type="text" id="command" title="Enter a JavaScript command here and hit return or press \'Evaluate\'" />','<input type="button" id="evaluateButton" value="Evaluate" class="button" title="Evaluate the command" onclick="evalCommandLine()" />',"</div>","</div>","</body>","</html>",""];e.open();for(var n=0,r=t.length;n<r;n++)e.writeln(t[n]);e.close()};this.setEventTypes(["load","unload"]);var V=function(){var e=_();e.setAppender(h),e.setNewestAtTop(A),e.setScrollToLatest(y),e.setMaxMessages(L),e.setShowCommandLine(S),e.setShowHideButton(D),e.setShowCloseButton(R),e.setMainWindow(window);var t=getCookie(j);t&&(e.commandHistory=t.split(","),e.currentCommandIndex=e.commandHistory.length),h.dispatchEvent("load",{win:e})};this.unload=function(){logLog.debug("unload "+this+", caller: "+this.unload.caller),f||(logLog.debug("really doing unload "+this),f=!0,E=!1,m=!1,h.dispatchEvent("unload",{}))};var Y=function(e,t,n,r){var o=setInterval(function(){try{f&&clearInterval(o),e(_())&&(clearInterval(o),n())}catch(e){clearInterval(o),T=!1,handleError(r,e)}},t)},K=function(){var e=document.domain!=location.hostname;return a?"":getBaseUrl()+"console.html"+(e?"?log4javascript_domain="+escape(document.domain):"")};if(e){var $=null,z=[];this.addCssProperty=function(e,t){w("cssProperties")&&z.push([e,t])};var X,q=!1,J=uniqueId+"_InPageAppender_"+C;this.hide=function(){g&&m&&(P()&&_().$("command").blur(),X.style.display="none",B=!0)},this.show=function(){g&&(m?(X.style.display="block",this.setShowCommandLine(S),B=!1):q||b(!0))},this.isVisible=function(){return!B&&!f},this.close=function(e){f||e&&!confirm("This will permanently remove the console from the page. No more messages will be logged. Do you wish to continue?")||(X.parentNode.removeChild(X),this.unload())},x=function(){function e(){try{i||h.show(),V(),E=!0,U()}catch(e){T=!1,handleError(n,e)}}function t(){try{var t=function(e){return isLoaded(e)};a&&W(_().document),t(_())?e():Y(t,100,e,n)}catch(e){T=!1,handleError(n,e)}}var n="InPageAppender.open: unable to create console iframe";B=!1,(X=$.appendChild(document.createElement("div"))).style.width=s,X.style.height=l,X.style.border="solid gray 1px";for(var r=0,o=z.length;r<o;r++)X.style[z[r][0]]=z[r][1];var c=a?"":" src='"+K()+"'";X.innerHTML="<iframe id='"+J+"' name='"+J+"' width='100%' height='100%' frameborder='0'"+c+" scrolling='no'></iframe>",f=!1;var d=function(e){try{return bool(e)&&bool(e.document)}catch(e){return!1}};d(_())?t():Y(d,100,t,n),m=!0},b=function(e){if(e||!i){var n=function(){if(t)try{var e=document.getElementById(t);1==e.nodeType&&($=e),x()}catch(e){handleError("InPageAppender.init: invalid container element '"+t+"' supplied",e)}else($=document.createElement("div")).style.position="fixed",$.style.left="0",$.style.right="0",$.style.bottom="0",document.body.appendChild($),h.addCssProperty("borderWidth","1px 0 0 0"),h.addCssProperty("zIndex",1e6),x()};pageLoaded&&t&&t.appendChild?($=t,x()):pageLoaded?n():log4javascript.addEventListener("load",n),q=!0}},M=function(){b(),g=!0},_=function(){var e=window.frames[J];if(e)return e},N=function(){return!(!T||f)&&(m&&!E&&_()&&isLoaded(_())&&(E=!0),E)}}else{var Z=h.defaults.useOldPopUp,Q=h.defaults.complainAboutPopUpBlocking,ee=this.defaults.reopenWhenClosed;this.isUseOldPopUp=function(){return Z},this.setUseOldPopUp=function(e){w("useOldPopUp")&&(Z=bool(e))},this.isComplainAboutPopUpBlocking=function(){return Q},this.setComplainAboutPopUpBlocking=function(e){w("complainAboutPopUpBlocking")&&(Q=bool(e))},this.isFocusPopUp=function(){return c},this.setFocusPopUp=function(e){c=bool(e)},this.isReopenWhenClosed=function(){return ee},this.setReopenWhenClosed=function(e){ee=bool(e)},this.close=function(){logLog.debug("close "+this);try{te.close(),this.unload()}catch(e){}},this.hide=function(){logLog.debug("hide "+this),P()&&this.close()},this.show=function(){logLog.debug("show "+this),m||x()},this.isVisible=function(){return N()};var te;x=function(){function e(){_().setCloseIfOpenerCloses(!Z||!a),V(),E=!0,U(),Y(i,500,c,"PopUpAppender.checkPopUpClosed: error checking pop-up window")}var t="width="+s+",height="+l+",status,resizable",n="";try{var r=window.frameElement;r&&(n="_"+r.tagName+"_"+(r.name||r.id||""))}catch(e){n="_inaccessibleParentFrame"}var o="PopUp_"+location.host.replace(/[^a-z0-9]/gi,"_")+"_"+C+n;Z&&a||(o=o+"_"+uniqueId);var i=function(e){if(f)return!0;try{return bool(e)&&e.closed}catch(e){}return!1},c=function(){f||h.unload()};try{if(te=window.open(K(),o,t),f=!1,m=!0,te&&te.document)if(a&&Z&&isLoaded(te))te.mainPageReloaded(),e();else{a&&W(te.document);isLoaded(te)?e():Y(function(e){return bool(e)&&isLoaded(e)},100,e,"PopUpAppender.init: unable to create console window")}else T=!1,logLog.warn("PopUpAppender.init: pop-ups blocked, please unblock to use PopUpAppender"),Q&&handleError("log4javascript: pop-up windows appear to be blocked. Please unblock them to use pop-up logging.")}catch(e){handleError("PopUpAppender.init: error creating pop-up",e)}},b=function(){i||x()},M=function(){b(),g=!0},_=function(){return te},N=function(){if(T&&!isUndefined(te)&&!f){if(te.closed||E&&isUndefined(te.closed))return h.unload(),logLog.debug("PopUpAppender: pop-up closed"),!1;!E&&isLoaded(te)&&(E=!0)}return T&&E&&!f}}this.getConsoleWindow=_},ConsoleAppender.addGlobalCommandLineFunction=function(e,t){n.push([e,t])},(e.prototype=new ConsoleAppender).defaults={layout:new PatternLayout("%d{HH:mm:ss} %-5p - %m{1}%n"),initiallyMinimized:!1,focusPopUp:!1,lazyInit:!0,useOldPopUp:!0,complainAboutPopUpBlocking:!0,newestMessageAtTop:!1,scrollToLatestMessage:!0,width:"600",height:"400",reopenWhenClosed:!1,maxMessages:null,showCommandLine:!0,commandLineObjectExpansionDepth:1,showHideButton:!1,showCloseButton:!0,useDocumentWrite:!0},e.prototype.toString=function(){return"PopUpAppender"},log4javascript.PopUpAppender=e,(t.prototype=new ConsoleAppender).defaults={layout:new PatternLayout("%d{HH:mm:ss} %-5p - %m{1}%n"),initiallyMinimized:!1,lazyInit:!0,newestMessageAtTop:!1,scrollToLatestMessage:!0,width:"100%",height:"220px",maxMessages:null,showCommandLine:!0,commandLineObjectExpansionDepth:1,showHideButton:!1,showCloseButton:!1,showLogEntryDeleteButtons:!0,useDocumentWrite:!0},t.prototype.toString=function(){return"InPageAppender"},log4javascript.InPageAppender=t,log4javascript.InlineAppender=t}(),function(){function e(e){var t=0;for(var n in e)t=Math.max(toStr(n).length,t);var r=[];for(n in e){var o,i="  "+padWithSpaces(toStr(n),t+2);try{o=splitIntoLines(toStr(e[n])).join(padWithSpaces(newLine,t+6))}catch(e){o="[Error obtaining property. Details: "+getExceptionMessage(e)+"]"}r.push(i+o)}return r.join(newLine)}function t(e,a,s,l,c){function d(e){return e.toString().replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/"/g,"&quot;")}function u(e){for(var t=e.style.cssText.split(";"),n="",r=0,o=t.length;r<o;r++){var i=t[r].split(":"),a=[];/^\s*$/.test(i[0])||a.push(trim(i[0]).toLowerCase()+":"+trim(i[1])),n=a.join(";")}return n}a=void 0===a||!!a,"string"!=typeof s&&(s=""),l=!!l,c=!!c;var p,h,g;if(!a||e.nodeType==n.DOCUMENT_FRAGMENT_NODE){for(p="",h=0,g=e.childNodes.length;h<g;h++)p+=t(e.childNodes[h],!0,s+i);return p}switch(e.nodeType){case n.ELEMENT_NODE:var m=e.tagName.toLowerCase();p=l?newLine+s:"",p+="<";var E=function(e){if(e.prefix)return e.prefix;if(e.outerHTML&&new RegExp("<([^:]+):"+e.tagName+"[^>]*>","i").test(e.outerHTML))return RegExp.$1.toLowerCase();return""}(e),f=!!E;for(f&&(p+=E+":"),p+=m,h=0,g=e.attributes.length;h<g;h++){var v=e.attributes[h];v.specified&&null!==v.nodeValue&&"style"!==v.nodeName.toLowerCase()&&"string"==typeof v.nodeValue&&0!==v.nodeName.indexOf("_moz")&&(p+=" "+v.nodeName.toLowerCase()+'="',p+=d(v.nodeValue),p+='"')}if(e.style.cssText){""!==u(e)&&(p+=' style="'+u(e)+'"')}if(array_contains(o,m)||f&&!e.hasChildNodes())p+="/>";else{p+=">";var T=!(1===e.childNodes.length&&e.childNodes[0].nodeType===n.TEXT_NODE),C=array_contains(r,m);for(h=0,g=e.childNodes.length;h<g;h++)p+=t(e.childNodes[h],!0,s+i,T,C);var A="</"+m+">";p+=T?newLine+s+A:A}return p;case n.TEXT_NODE:if(function(e){return e.nodeType==n.TEXT_NODE&&/^[ \t\r\n]*$/.test(e.nodeValue)}(e))p="";else{if(c)p=e.nodeValue;else{var y=splitIntoLines(trim(e.nodeValue)),L=[];for(h=0,g=y.length;h<g;h++)L[h]=trim(y[h]);p=L.join(newLine+s)}l&&(p=newLine+s+p)}return p;case n.CDATA_SECTION_NODE:return"<![CDATA["+e.nodeValue+"]]>"+newLine;case n.DOCUMENT_NODE:for(p="",h=0,g=e.childNodes.length;h<g;h++)p+=t(e.childNodes[h],!0,s);return p;default:return""}}var n={ELEMENT_NODE:1,ATTRIBUTE_NODE:2,TEXT_NODE:3,CDATA_SECTION_NODE:4,ENTITY_REFERENCE_NODE:5,ENTITY_NODE:6,PROCESSING_INSTRUCTION_NODE:7,COMMENT_NODE:8,DOCUMENT_NODE:9,DOCUMENT_TYPE_NODE:10,DOCUMENT_FRAGMENT_NODE:11,NOTATION_NODE:12},r=["script","pre"],o=["br","img","hr","param","link","area","input","col","base","meta"],i="  ";ConsoleAppender.addGlobalCommandLineFunction("$",function(e,t,n){return document.getElementById(t[0])}),ConsoleAppender.addGlobalCommandLineFunction("dir",function(t,n,r){for(var o=[],i=0,a=n.length;i<a;i++)o[i]=e(n[i]);return o.join(newLine+newLine)}),ConsoleAppender.addGlobalCommandLineFunction("dirxml",function(e,n,r){for(var o=[],i=0,a=n.length;i<a;i++)o[i]=t(n[i]);return o.join(newLine+newLine)}),ConsoleAppender.addGlobalCommandLineFunction("cd",function(e,t,n){var r,o;return 0===t.length||""===t[0]?(r=window,o="Command line set to run in main window"):t[0].window==t[0]?(r=t[0],o="Command line set to run in frame '"+t[0].name+"'"):(r=window.frames[t[0]])?o="Command line set to run in frame '"+t[0]+"'":(n.isError=!0,o="Frame '"+t[0]+"' does not exist",r=e.getCommandWindow()),e.setCommandWindow(r),o}),ConsoleAppender.addGlobalCommandLineFunction("clear",function(e,t,n){n.appendResult=!1,e.clear()}),ConsoleAppender.addGlobalCommandLineFunction("keys",function(e,t,n){var r=[];for(var o in t[0])r.push(o);return r}),ConsoleAppender.addGlobalCommandLineFunction("values",function(e,t,n){var r=[];for(var o in t[0])try{r.push(t[0][o])}catch(e){logLog.warn("values(): Unable to obtain value for key "+o+". Details: "+getExceptionMessage(e))}return r}),ConsoleAppender.addGlobalCommandLineFunction("expansionDepth",function(e,t,n){var r=parseInt(t[0],10);return isNaN(r)||r<0?(n.isError=!0,t[0]+" is not a valid expansion depth"):(e.setCommandLineObjectExpansionDepth(r),"Object expansion depth set to "+r)})}(),log4javascript.setDocumentReady=function(){pageLoaded=!0,log4javascript.dispatchEvent("load",{})},window.addEventListener)window.addEventListener("load",log4javascript.setDocumentReady,!1);else if(window.attachEvent)window.attachEvent("onload",log4javascript.setDocumentReady);else{var oldOnload=window.onload;"function"!=typeof window.onload?window.onload=log4javascript.setDocumentReady:window.onload=function(e){oldOnload&&oldOnload(e),log4javascript.setDocumentReady()}}return log4javascript},this),Ext.define("CMDBuild.core.interfaces.Ajax",{extend:"Ext.data.Connection",uses:["CMDBuild.core.CookiesManager","CMDBuild.core.interfaces.messages.Error","CMDBuild.core.interfaces.messages.Warning","CMDBuild.core.interfaces.service.LoadMask","CMDBuild.core.Utils"],singleton:!0,autoAbort:!1,listeners:{beforerequest:function(e,t,n){return CMDBuild.core.interfaces.Ajax.trapCallbacks(e,t)}},adapterCallback:function(e,t,n,r){var o=CMDBuild.core.interfaces.Ajax.decodeJson(n.responseText);CMDBuild.core.CookiesManager.authorizationExpirationUpdate(),CMDBuild.core.interfaces.service.LoadMask.manage(e.loadMask,!1),CMDBuild.global.interfaces.Configurations.get("disableAllMessages")||(CMDBuild.global.interfaces.Configurations.get("disableWarnings")||CMDBuild.core.interfaces.messages.Warning.display(o),CMDBuild.global.interfaces.Configurations.get("disableErrors")||CMDBuild.core.interfaces.messages.Error.display(o,e)),Ext.callback(r,e.scope,[e,t,n])},adapterSuccess:function(e,t,n){var r=CMDBuild.core.interfaces.Ajax.decodeJson(e.responseText);Ext.callback(n,t.scope,[e,t,r])},adapterFailure:function(e,t,n){var r=CMDBuild.core.interfaces.Ajax.decodeJson(e.responseText);Ext.callback(n,t.scope,[e,t,r])},decodeJson:function(e){if(e=Ext.isEmpty(e)?'{"success":true,"response":null}':e,CMDBuild.core.Utils.isJsonString(e)){Ext.isEmpty(e)||(e=e.replace(/<\/\w+>$/,""));try{return Ext.decode(e)}catch(e){_error(e,"CMDBuild.core.interfaces.Ajax")}return""}return _error('invalid json string: "'+e+'"',"CMDBuild.core.interfaces.Ajax"),""},interceptorCallback:function(e){return Ext.bind(CMDBuild.core.interfaces.Ajax.adapterCallback,e.scope,[e.callback],!0)},interceptorFailure:function(e){return Ext.bind(CMDBuild.core.interfaces.Ajax.adapterFailure,e.scope,[e.failure],!0)},interceptorSuccess:function(e){return Ext.bind(CMDBuild.core.interfaces.Ajax.adapterSuccess,e.scope,[e.success],!0)},onComplete:function(e,t){var n,r=e.options,o=!0;return n=e.aborted||e.timedout?this.createException(e):this.createResponse(e),Ext.isEmpty(n.responseText)||Ext.isEmpty(Ext.decode(n.responseText).success)||(o=Ext.decode(n.responseText).success),o?(this.fireEvent("requestcomplete",this,n,r),Ext.callback(r.success,r.scope,[n,r])):(this.fireEvent("requestexception",this,n,r),Ext.callback(r.failure,r.scope,[n,r])),Ext.callback(r.callback,r.scope,[r,o,n]),delete this.requests[e.id],n},trapCallbacks:function(e,t){return CMDBuild.core.interfaces.service.LoadMask.manage(t.loadMask,!0),Ext.apply(t,{callback:CMDBuild.core.interfaces.Ajax.interceptorCallback(t),failure:CMDBuild.core.interfaces.Ajax.interceptorFailure(t),success:CMDBuild.core.interfaces.Ajax.interceptorSuccess(t)}),!0}}),Ext.define("CMDBuild.core.Message",{uses:["Ext.ux.Notification"],detailBuffer:[],singleton:!0,alert:function(e,t,n,r){e=e||"",t=t||"";return(n=!!Ext.isBoolean(n)&&n)?Ext.MessageBox.show({title:e,msg:t,width:300,buttons:Ext.MessageBox.OK,icon:r}):Ext.create("Ext.ux.Notification",{iconCls:r,title:e,html:t,autoDestroy:!0,hideDelay:5e3,shadow:!1}).show(document)},buildDetailLink:function(e,t){return CMDBuild.core.Message.detailBuffer[e]=t,'<p class="show_detail_link" id="errorDetails_" onClick="javascript:buildDetaiWindow('+e+')">'+CMDBuild.Translation.showDetails+"</p>"},error:function(e,t,n){e=e||CMDBuild.Translation.error,n=!!Ext.isBoolean(n)&&n;var r=t;Ext.isObject(t)&&!Ext.isEmpty(t.text)&&(r=t.text,Ext.isEmpty(t.detail)||(r+=CMDBuild.core.Message.buildDetailLink(CMDBuild.core.Message.detailBuffer.length,t.detail))),CMDBuild.core.Message.alert(e,r,n,Ext.MessageBox.ERROR)},info:function(e,t,n){CMDBuild.core.Message.alert(e,t,n,Ext.MessageBox.INFO)},success:function(){CMDBuild.core.Message.alert("",CMDBuild.Translation.success,!1,Ext.MessageBox.INFO)},warning:function(e,t,n){CMDBuild.core.Message.alert(e||CMDBuild.Translation.warning,t,!!Ext.isBoolean(n)&&n,Ext.MessageBox.WARNING)}}),Ext.define("CMDBuild.core.CookiesManager",{uses:["CMDBuild.core.constants.Proxy"],singleton:!0,authorizationClear:function(){Ext.util.Cookies.set(CMDBuild.core.constants.Proxy.AUTHORIZATION_HEADER_KEY,null,null,Ext.Array.slice(window.location.pathname.split("/"),0,-1).join("/")+"/"),Ext.util.Cookies.clear(CMDBuild.core.constants.Proxy.AUTHORIZATION_HEADER_KEY)},authorizationExpirationUpdate:function(){if(!CMDBuild.core.CookiesManager.authorizationIsEmpty()){var e=null;Ext.isEmpty(CMDBuild.configuration.instance.get(CMDBuild.core.constants.Proxy.SESSION_TIMEOUT))||(e=new Date).setSeconds(e.getSeconds()+CMDBuild.configuration.instance.get(CMDBuild.core.constants.Proxy.SESSION_TIMEOUT)),Ext.util.Cookies.set(CMDBuild.core.constants.Proxy.AUTHORIZATION_HEADER_KEY,CMDBuild.core.CookiesManager.authorizationGet(),e,Ext.Array.slice(window.location.pathname.split("/"),0,-1).join("/")+"/")}},authorizationGet:function(){return Ext.util.Cookies.get(CMDBuild.core.constants.Proxy.AUTHORIZATION_HEADER_KEY)},authorizationIsEmpty:function(){return Ext.isEmpty(CMDBuild.core.CookiesManager.authorizationGet())||"null"==CMDBuild.core.CookiesManager.authorizationGet()},authorizationSet:function(e){if("null"!==e)return Ext.isEmpty(e)&&"null"==e?void 0:Ext.util.Cookies.set(CMDBuild.core.constants.Proxy.AUTHORIZATION_HEADER_KEY,e,null,Ext.Array.slice(window.location.pathname.split("/"),0,-1).join("/")+"/");this.authorizationClear()}}),Ext.define("CMDBuild.core.configurations.DataFormat",{singleton:!0,config:{date:"d/m/Y",dateTime:"d/m/Y H:i:s",time:"H:i:s"},constructor:function(e){this.initConfig(e)}});